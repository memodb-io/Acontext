basePath: /api/v1
definitions:
  fileparser.FileContent:
    properties:
      raw:
        description: Raw text content
        type: string
      type:
        description: '"text", "json", "csv", "code"'
        type: string
    type: object
  handler.ConfirmExperienceReq:
    properties:
      save:
        type: boolean
    required:
    - save
    type: object
  handler.ConnectToSpaceReq:
    properties:
      space_id:
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        type: string
    required:
    - space_id
    type: object
  handler.CreateBlockReq:
    properties:
      parent_id:
        type: string
      props:
        additionalProperties: {}
        type: object
      title:
        type: string
      type:
        example: page
        type: string
    required:
    - type
    type: object
  handler.CreateDiskReq:
    properties:
      user:
        example: alice@acontext.io
        type: string
    type: object
  handler.CreateSessionReq:
    properties:
      configs:
        additionalProperties: true
        type: object
      disable_task_tracking:
        example: false
        type: boolean
      space_id:
        example: 123e4567-e89b-12d3-a456-42661417
        format: uuid
        type: string
      user:
        example: alice@acontext.io
        type: string
    type: object
  handler.CreateSpaceReq:
    properties:
      configs:
        additionalProperties: true
        type: object
      user:
        example: alice@acontext.io
        type: string
    type: object
  handler.DownloadToSandboxReq:
    properties:
      file_path:
        description: File path (directory) of the artifact
        type: string
      filename:
        description: Filename of the artifact
        type: string
      sandbox_id:
        description: Target sandbox ID
        type: string
      sandbox_path:
        description: Destination directory in the sandbox
        type: string
    required:
    - file_path
    - filename
    - sandbox_id
    - sandbox_path
    type: object
  handler.DownloadToSandboxResp:
    properties:
      success:
        type: boolean
    type: object
  handler.ExecCommandReq:
    properties:
      command:
        type: string
    required:
    - command
    type: object
  handler.GetArtifactResp:
    properties:
      artifact:
        $ref: '#/definitions/model.Artifact'
      content:
        $ref: '#/definitions/fileparser.FileContent'
      public_url:
        type: string
    type: object
  handler.ListArtifactsResp:
    properties:
      artifacts:
        items:
          $ref: '#/definitions/model.Artifact'
        type: array
      directories:
        items:
          type: string
        type: array
    type: object
  handler.MoveBlockReq:
    properties:
      parent_id:
        type: string
      sort:
        type: integer
    type: object
  handler.RenameToolNameReq:
    properties:
      rename:
        items:
          $ref: '#/definitions/handler.ToolRenameItem'
        minItems: 1
        type: array
    required:
    - rename
    type: object
  handler.StoreMessageReq:
    properties:
      blob: {}
      format:
        enum:
        - acontext
        - openai
        - anthropic
        - gemini
        example: openai
        type: string
    required:
    - blob
    type: object
  handler.TokenCountsResp:
    properties:
      total_tokens:
        type: integer
    type: object
  handler.ToolRenameItem:
    properties:
      new_name:
        type: string
      old_name:
        type: string
    required:
    - new_name
    - old_name
    type: object
  handler.UpdateArtifactReq:
    properties:
      file_path:
        description: File path including filename
        type: string
      meta:
        description: Custom metadata as JSON string
        type: string
    required:
    - file_path
    - meta
    type: object
  handler.UpdateArtifactResp:
    properties:
      artifact:
        $ref: '#/definitions/model.Artifact'
    type: object
  handler.UpdateBlockPropertiesReq:
    properties:
      props:
        additionalProperties: {}
        type: object
      title:
        type: string
    type: object
  handler.UpdateBlockSortReq:
    properties:
      sort:
        type: integer
    type: object
  handler.UpdateSessionConfigsReq:
    properties:
      configs:
        additionalProperties: true
        type: object
    type: object
  handler.UpdateSpaceConfigsReq:
    properties:
      configs:
        additionalProperties: true
        type: object
    required:
    - configs
    type: object
  handler.UploadFromSandboxReq:
    properties:
      file_path:
        description: Destination directory path on the disk
        type: string
      sandbox_filename:
        description: Filename in the sandbox
        type: string
      sandbox_id:
        description: Source sandbox ID
        type: string
      sandbox_path:
        description: Source directory in the sandbox
        type: string
    required:
    - file_path
    - sandbox_filename
    - sandbox_id
    - sandbox_path
    type: object
  httpclient.FlagResponse:
    properties:
      errmsg:
        type: string
      status:
        type: integer
    type: object
  httpclient.InsertBlockResponse:
    properties:
      id:
        type: string
    type: object
  httpclient.LearningStatusResponse:
    properties:
      not_space_digested_count:
        type: integer
      space_digested_count:
        type: integer
    type: object
  httpclient.SandboxCommandOutput:
    properties:
      exit_code:
        type: integer
      stderr:
        type: string
      stdout:
        type: string
    type: object
  httpclient.SandboxRuntimeInfo:
    properties:
      sandbox_created_at:
        type: string
      sandbox_expires_at:
        type: string
      sandbox_id:
        type: string
      sandbox_status:
        type: string
    type: object
  httpclient.SearchResultBlockItem:
    properties:
      block_id:
        type: string
      distance:
        type: number
      props:
        additionalProperties: true
        type: object
      title:
        type: string
      type:
        type: string
    type: object
  httpclient.SpaceSearchResult:
    properties:
      cited_blocks:
        items:
          $ref: '#/definitions/httpclient.SearchResultBlockItem'
        type: array
    type: object
  httpclient.ToolReferenceData:
    properties:
      name:
        type: string
      sop_count:
        type: integer
    type: object
  model.AgentSkills:
    properties:
      created_at:
        type: string
      description:
        type: string
      file_index:
        description: |-
          FileIndex contains file information (path and MIME type) from the skillName root directory
          Example: [{"path": "SKILL.md", "mime": "text/markdown"}, {"path": "scripts/extract_text.json", "mime": "application/json"}]
          These paths are relative to baseS3Key (which includes skillName)
          Full S3 key = baseS3Key + "/" + fileIndex[i].Path
        items:
          type: object
        type: array
      id:
        type: string
      meta:
        type: object
      name:
        description: Name is not unique - multiple skills can have the same name
        type: string
      updated_at:
        type: string
      user_id:
        type: string
    type: object
  model.Artifact:
    properties:
      created_at:
        type: string
      disk_id:
        type: string
      filename:
        type: string
      meta:
        type: object
      path:
        type: string
      updated_at:
        type: string
    type: object
  model.Block:
    properties:
      created_at:
        type: string
      id:
        type: string
      is_archived:
        type: boolean
      parent_id:
        type: string
      props:
        type: object
      sort:
        type: integer
      space_id:
        type: string
      title:
        type: string
      type:
        type: string
      updated_at:
        type: string
    type: object
  model.Disk:
    properties:
      created_at:
        type: string
      id:
        type: string
      project_id:
        type: string
      updated_at:
        type: string
      user_id:
        type: string
    type: object
  model.ExperienceConfirmation:
    properties:
      created_at:
        type: string
      experience_data:
        type: object
      id:
        type: string
      space_id:
        type: string
      task_id:
        type: string
      updated_at:
        type: string
    type: object
  model.Message:
    properties:
      created_at:
        type: string
      id:
        type: string
      meta:
        type: object
      parent_id:
        type: string
      parts:
        items:
          type: object
        type: array
      role:
        type: string
      session_id:
        type: string
      session_task_process_status:
        type: string
      task_id:
        type: string
      updated_at:
        type: string
    type: object
  model.MessageObservingStatus:
    properties:
      in_process:
        type: integer
      observed:
        type: integer
      pending:
        type: integer
      updated_at:
        type: string
    type: object
  model.Session:
    properties:
      configs:
        type: object
      created_at:
        type: string
      disable_task_tracking:
        type: boolean
      id:
        type: string
      project_id:
        type: string
      space_id:
        type: string
      updated_at:
        type: string
      user_id:
        type: string
    type: object
  model.Space:
    properties:
      configs:
        type: object
      created_at:
        type: string
      id:
        type: string
      project_id:
        type: string
      updated_at:
        type: string
      user_id:
        type: string
    type: object
  model.Task:
    properties:
      created_at:
        type: string
      data:
        $ref: '#/definitions/model.TaskData'
      id:
        type: string
      is_planning:
        type: boolean
      order:
        type: integer
      project_id:
        type: string
      session_id:
        type: string
      space_digested:
        type: boolean
      status:
        type: string
      updated_at:
        type: string
    type: object
  model.TaskData:
    properties:
      progresses:
        items:
          type: string
        type: array
      sop_thinking:
        type: string
      task_description:
        type: string
      user_preferences:
        items:
          type: string
        type: array
    type: object
  model.User:
    properties:
      created_at:
        type: string
      id:
        type: string
      identifier:
        type: string
      project_id:
        type: string
      updated_at:
        type: string
    type: object
  repo.UserResourceCounts:
    properties:
      disks_count:
        type: integer
      sessions_count:
        type: integer
      skills_count:
        type: integer
      spaces_count:
        type: integer
    type: object
  serializer.Response:
    properties:
      code:
        type: integer
      error:
        type: string
      msg:
        type: string
    type: object
  service.AgentSkillsListItem:
    properties:
      created_at:
        type: string
      description:
        type: string
      id:
        type: string
      meta:
        additionalProperties: true
        type: object
      name:
        type: string
      updated_at:
        type: string
      user_id:
        type: string
    type: object
  service.GetFileOutput:
    properties:
      content:
        allOf:
        - $ref: '#/definitions/fileparser.FileContent'
        description: Present if file is text-based and parseable
      mime:
        type: string
      path:
        type: string
      url:
        description: Present if file is not text-based or not parseable
        type: string
    type: object
  service.GetMessagesOutput:
    properties:
      edit_at_message_id:
        type: string
      has_more:
        type: boolean
      items:
        items:
          $ref: '#/definitions/model.Message'
        type: array
      next_cursor:
        type: string
      public_urls:
        additionalProperties:
          $ref: '#/definitions/service.PublicURL'
        description: file_name -> url
        type: object
    type: object
  service.GetTasksOutput:
    properties:
      has_more:
        type: boolean
      items:
        items:
          $ref: '#/definitions/model.Task'
        type: array
      next_cursor:
        type: string
    type: object
  service.GetUserResourcesOutput:
    properties:
      counts:
        $ref: '#/definitions/repo.UserResourceCounts'
    type: object
  service.ListAgentSkillsOutput:
    properties:
      has_more:
        type: boolean
      items:
        items:
          $ref: '#/definitions/service.AgentSkillsListItem'
        type: array
      next_cursor:
        type: string
    type: object
  service.ListDisksOutput:
    properties:
      has_more:
        type: boolean
      items:
        items:
          $ref: '#/definitions/model.Disk'
        type: array
      next_cursor:
        type: string
    type: object
  service.ListExperienceConfirmationsOutput:
    properties:
      has_more:
        type: boolean
      items:
        items:
          $ref: '#/definitions/model.ExperienceConfirmation'
        type: array
      next_cursor:
        type: string
    type: object
  service.ListSessionsOutput:
    properties:
      has_more:
        type: boolean
      items:
        items:
          $ref: '#/definitions/model.Session'
        type: array
      next_cursor:
        type: string
    type: object
  service.ListSpacesOutput:
    properties:
      has_more:
        type: boolean
      items:
        items:
          $ref: '#/definitions/model.Space'
        type: array
      next_cursor:
        type: string
    type: object
  service.ListUsersOutput:
    properties:
      has_more:
        type: boolean
      items:
        items:
          $ref: '#/definitions/model.User'
        type: array
      next_cursor:
        type: string
    type: object
  service.PublicURL:
    properties:
      expire_at:
        type: string
      url:
        type: string
    type: object
info:
  contact: {}
  description: API for Acontext.
  title: Acontext API
  version: "1.0"
paths:
  /agent_skills:
    get:
      consumes:
      - application/json
      description: List all agent skills under a project
      parameters:
      - description: User identifier to filter skills
        example: alice@acontext.io
        in: query
        name: user
        type: string
      - description: Limit of agent skills to return, default 20. Max 200.
        in: query
        name: limit
        type: integer
      - description: Cursor for pagination
        in: query
        name: cursor
        type: string
      - description: Order by created_at descending if true
        in: query
        name: time_desc
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.ListAgentSkillsOutput'
              type: object
      security:
      - BearerAuth: []
      summary: List agent skills
      tags:
      - agent_skills
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # List all skills with pagination
          result = client.skills.list_catalog(limit=50)
          for skill in result.items:
              print(f"{skill.name}: {skill.description}")

          # Paginate through all skills
          if result.has_more:
              next_page = client.skills.list_catalog(cursor=result.next_cursor)
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@anthropic/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // List all skills with pagination
          const result = await client.skills.list_catalog({ limit: 50 });
          result.items.forEach(skill => {
            console.log(`${skill.name}: ${skill.description}`);
          });

          // Paginate through all skills
          if (result.has_more) {
            const nextPage = await client.skills.list_catalog({ cursor: result.next_cursor });
          }
    post:
      consumes:
      - multipart/form-data
      description: Upload a zip file containing agent skill and extract it to S3.
        The zip file must contain a SKILL.md file (case-insensitive) with YAML format
        containing 'name' and 'description' fields. The name and description will
        be extracted from SKILL.md. Optionally associate with a user identifier.
      parameters:
      - description: 'ZIP file containing agent skill. Must contain SKILL.md (case-insensitive)
          with YAML format: name and description fields.'
        in: formData
        name: file
        required: true
        type: file
      - description: User identifier to associate with the skill
        example: alice@acontext.io
        in: formData
        name: user
        type: string
      - description: Additional metadata (JSON string)
        in: formData
        name: meta
        type: string
      produces:
      - application/json
      responses:
        "201":
          description: Returns agent skill with name and description extracted from
            SKILL.md
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.AgentSkills'
              type: object
      security:
      - BearerAuth: []
      summary: Create agent skill
      tags:
      - agent_skills
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient
          from acontext.uploads import FileUpload

          client = AcontextClient(api_key='sk_project_token')

          # Upload a skill from a zip file
          with open('my_skill.zip', 'rb') as f:
              skill = client.skills.create(
                  file=FileUpload(filename='my_skill.zip', content=f.read(), content_type='application/zip'),
                  user='alice@example.com',
                  meta={'version': '1.0'}
              )
          print(f"Created skill: {skill.name} (ID: {skill.id})")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@anthropic/acontext';
          import fs from 'fs';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Upload a skill from a zip file
          const fileBuffer = fs.readFileSync('my_skill.zip');
          const skill = await client.skills.create({
            file: ['my_skill.zip', fileBuffer, 'application/zip'],
            user: 'alice@example.com',
            meta: { version: '1.0' }
          });
          console.log(`Created skill: ${skill.name} (ID: ${skill.id})`);
  /agent_skills/{id}:
    delete:
      consumes:
      - application/json
      description: Delete agent skill and all extracted files from S3
      parameters:
      - description: Agent skill UUID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Delete agent skill
      tags:
      - agent_skills
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Delete a skill by ID
          client.skills.delete('skill-uuid-here')
          print('Skill deleted successfully')
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@anthropic/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Delete a skill by ID
          await client.skills.delete('skill-uuid-here');
          console.log('Skill deleted successfully');
    get:
      consumes:
      - application/json
      description: Get agent skill by its UUID
      parameters:
      - description: Agent skill UUID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.AgentSkills'
              type: object
      security:
      - BearerAuth: []
      summary: Get agent skill by ID
      tags:
      - agent_skills
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get a skill by ID
          skill = client.skills.get('skill-uuid-here')
          print(f"Skill: {skill.name}")
          print(f"Description: {skill.description}")
          print(f"Files: {len(skill.file_index)} file(s)")
          for f in skill.file_index:
              print(f"  - {f.path} ({f.mime})")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@anthropic/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get a skill by ID
          const skill = await client.skills.get('skill-uuid-here');
          console.log(`Skill: ${skill.name}`);
          console.log(`Description: ${skill.description}`);
          console.log(`Files: ${skill.file_index.length} file(s)`);
          skill.file_index.forEach(f => console.log(`  - ${f.path} (${f.mime})`));
  /agent_skills/{id}/file:
    get:
      consumes:
      - application/json
      description: Get file content or download URL from agent skill. If the file
        is text-based (parseable), returns parsed content. Otherwise, returns a presigned
        download URL.
      parameters:
      - description: Agent skill UUID
        in: path
        name: id
        required: true
        type: string
      - description: File path within the skill (e.g., 'scripts/extract_text.json')
        in: query
        name: file_path
        required: true
        type: string
      - description: URL expiration in seconds for presigned URL (default 900)
        in: query
        name: expire
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.GetFileOutput'
              type: object
      security:
      - BearerAuth: []
      summary: Get file from agent skill
      tags:
      - agent_skills
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get a file from a skill (text files return content, binary files return URL)
          file_resp = client.skills.get_file(
              skill_id='skill-uuid-here',
              file_path='scripts/main.py',
              expire=1800  # URL expires in 30 minutes
          )

          print(f"File: {file_resp.path} ({file_resp.mime})")
          if file_resp.content:
              print(f"Content: {file_resp.content.raw}")
          if file_resp.url:
              print(f"Download URL: {file_resp.url}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@anthropic/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get a file from a skill (text files return content, binary files return URL)
          const fileResp = await client.skills.getFile({
            skillId: 'skill-uuid-here',
            filePath: 'scripts/main.py',
            expire: 1800  // URL expires in 30 minutes
          });

          console.log(`File: ${fileResp.path} (${fileResp.mime})`);
          if (fileResp.content) {
            console.log(`Content: ${fileResp.content.raw}`);
          }
          if (fileResp.url) {
            console.log(`Download URL: ${fileResp.url}`);
          }
  /disk:
    get:
      consumes:
      - application/json
      description: List all disks under a project
      parameters:
      - description: User identifier to filter disks
        example: alice@acontext.io
        in: query
        name: user
        type: string
      - description: Limit of disks to return, default 20. Max 200.
        in: query
        name: limit
        type: integer
      - description: Cursor for pagination. Use the cursor from the previous response
          to get the next page.
        in: query
        name: cursor
        type: string
      - description: Order by created_at descending if true, ascending if false (default
          false)
        example: false
        in: query
        name: time_desc
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.ListDisksOutput'
              type: object
      security:
      - BearerAuth: []
      summary: List disks
      tags:
      - disk
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # List disks
          disks = client.disks.list(limit=10, time_desc=True)
          for disk in disks.items:
              print(f"Disk: {disk.id}")

          # List disks for a specific user
          disks = client.disks.list(user='alice@acontext.io', limit=10)
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // List disks
          const disks = await client.disks.list({ limit: 10, timeDesc: true });
          for (const disk of disks.items) {
            console.log(`Disk: ${disk.id}`);
          }

          // List disks for a specific user
          const userDisks = await client.disks.list({ user: 'alice@acontext.io', limit: 10 });
    post:
      consumes:
      - application/json
      description: Create a disk group under a project. Optionally associate with
        a user identifier.
      parameters:
      - description: CreateDisk payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.CreateDiskReq'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Disk'
              type: object
      security:
      - BearerAuth: []
      summary: Create disk
      tags:
      - disk
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Create a disk
          disk = client.disks.create()
          print(f"Created disk: {disk.id}")

          # Create a disk for a specific user
          disk = client.disks.create(user='alice@acontext.io')
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Create a disk
          const disk = await client.disks.create();
          console.log(`Created disk: ${disk.id}`);

          // Create a disk for a specific user
          const userDisk = await client.disks.create({ user: 'alice@acontext.io' });
  /disk/{disk_id}:
    delete:
      consumes:
      - application/json
      description: Delete a disk by its UUID
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Delete disk
      tags:
      - disk
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Delete a disk
          client.disks.delete(disk_id='disk-uuid')
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Delete a disk
          await client.disks.delete('disk-uuid');
  /disk/{disk_id}/artifact:
    delete:
      consumes:
      - application/json
      description: Delete an artifact by path and filename
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: File path including filename
        example: /documents/report.pdf
        in: query
        name: file_path
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Delete artifact
      tags:
      - artifact
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Delete an artifact
          client.disks.delete_artifact(
              disk_id='disk-uuid',
              file_path='/documents/report.pdf'
          )
          print('Artifact deleted successfully')
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Delete an artifact
          await client.disks.deleteArtifact('disk-uuid', {
            filePath: '/documents/report.pdf'
          });
          console.log('Artifact deleted successfully');
    get:
      consumes:
      - application/json
      description: Get artifact information by path and filename. Optionally include
        a presigned URL for downloading and parsed file content.
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: File path including filename
        example: /documents/report.pdf
        in: query
        name: file_path
        required: true
        type: string
      - description: Whether to return public URL, default is true
        example: true
        in: query
        name: with_public_url
        type: boolean
      - description: Whether to return parsed file content, default is true
        example: true
        in: query
        name: with_content
        type: boolean
      - description: 'Expire time in seconds for presigned URL (default: 3600)'
        example: 3600
        in: query
        name: expire
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.GetArtifactResp'
              type: object
      security:
      - BearerAuth: []
      summary: Get artifact
      tags:
      - artifact
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get artifact information
          artifact_info = client.disks.get_artifact(
              disk_id='disk-uuid',
              file_path='/documents/report.pdf',
              with_public_url=True,
              with_content=True,
              expire=3600
          )
          print(f"Artifact: {artifact_info.artifact.filename}")
          if artifact_info.public_url:
              print(f"Download URL: {artifact_info.public_url}")
          if artifact_info.content:
              print(f"Content: {artifact_info.content.text[:100]}...")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get artifact information
          const artifactInfo = await client.disks.getArtifact('disk-uuid', {
            filePath: '/documents/report.pdf',
            withPublicUrl: true,
            withContent: true,
            expire: 3600
          });
          console.log(`Artifact: ${artifactInfo.artifact.filename}`);
          if (artifactInfo.publicUrl) {
            console.log(`Download URL: ${artifactInfo.publicUrl}`);
          }
          if (artifactInfo.content) {
            console.log(`Content: ${artifactInfo.content.text.substring(0, 100)}...`);
          }
    post:
      consumes:
      - multipart/form-data
      description: 'Upload a file and create or update an artifact record under a
        disk. File size must not exceed the configured maximum upload size limit (default:
        16MB).'
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: File path in the disk storage (optional, defaults to '/')
        in: formData
        name: file_path
        type: string
      - description: File to upload (size must not exceed configured limit)
        in: formData
        name: file
        required: true
        type: file
      - description: Custom metadata as JSON string (optional, system metadata will
          be stored under '__artifact_info__' key)
        in: formData
        name: meta
        type: string
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Artifact'
              type: object
        "413":
          description: File size exceeds maximum allowed size
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Upsert artifact
      tags:
      - artifact
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Upload a file to disk
          with open('report.pdf', 'rb') as f:
              artifact = client.disks.upload_artifact(
                  disk_id='disk-uuid',
                  file=f,
                  file_path='/documents/',
                  meta={'category': 'reports', 'year': 2024}
              )
          print(f"Uploaded artifact: {artifact.id}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';
          import fs from 'fs';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Upload a file to disk
          const fileBuffer = fs.readFileSync('report.pdf');
          const artifact = await client.disks.uploadArtifact('disk-uuid', {
            file: fileBuffer,
            filePath: '/documents/',
            meta: { category: 'reports', year: 2024 }
          });
          console.log(`Uploaded artifact: ${artifact.id}`);
    put:
      consumes:
      - application/json
      description: Update an artifact's metadata (user-defined metadata only)
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: Update artifact request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateArtifactReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.UpdateArtifactResp'
              type: object
      security:
      - BearerAuth: []
      summary: Update artifact meta
      tags:
      - artifact
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Update artifact metadata
          artifact = client.disks.update_artifact(
              disk_id='disk-uuid',
              file_path='/documents/report.pdf',
              meta={'category': 'updated', 'reviewed': True, 'version': 2}
          )
          print(f"Updated artifact: {artifact.artifact.id}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Update artifact metadata
          const artifact = await client.disks.updateArtifact('disk-uuid', {
            filePath: '/documents/report.pdf',
            meta: { category: 'updated', reviewed: true, version: 2 }
          });
          console.log(`Updated artifact: ${artifact.artifact.id}`);
  /disk/{disk_id}/artifact/download_to_sandbox:
    post:
      consumes:
      - application/json
      description: Download an artifact from disk storage to a sandbox environment
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: Download to sandbox request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.DownloadToSandboxReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.DownloadToSandboxResp'
              type: object
      security:
      - BearerAuth: []
      summary: Download artifact to sandbox
      tags:
      - artifact
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Download artifact to sandbox
          result = client.disks.artifacts.download_to_sandbox(
              disk_id='disk-uuid',
              file_path='/documents/',
              filename='report.pdf',
              sandbox_id='sandbox-uuid',
              sandbox_path='/home/user/'
          )
          print(f"Success: {result.success}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Download artifact to sandbox
          const result = await client.disks.artifacts.downloadToSandbox('disk-uuid', {
            filePath: '/documents/',
            filename: 'report.pdf',
            sandboxId: 'sandbox-uuid',
            sandboxPath: '/home/user/'
          });
          console.log(`Success: ${result.success}`);
  /disk/{disk_id}/artifact/glob:
    get:
      consumes:
      - application/json
      description: Search through artifact file paths using glob patterns (*, ?, etc.)
      parameters:
      - description: Disk ID
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: Glob pattern (e.g., '**/*.py', '*.txt')
        in: query
        name: query
        required: true
        type: string
      - description: Maximum number of results (default 100, max 1000)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Artifact'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: Search artifact paths with glob patterns
      tags:
      - artifact
  /disk/{disk_id}/artifact/grep:
    get:
      consumes:
      - application/json
      description: Search through text-based artifact content using regex patterns
      parameters:
      - description: Disk ID
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: Regex pattern to search for
        in: query
        name: query
        required: true
        type: string
      - description: Maximum number of results (default 100, max 1000)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Artifact'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: Search artifact content with regex
      tags:
      - artifact
  /disk/{disk_id}/artifact/ls:
    get:
      consumes:
      - application/json
      description: List artifacts in a specific path or all artifacts in a disk
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: Path filter (optional, defaults to root '/')
        in: query
        name: path
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.ListArtifactsResp'
              type: object
      security:
      - BearerAuth: []
      summary: List artifacts
      tags:
      - artifact
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # List artifacts in a path
          result = client.disks.list_artifacts(
              disk_id='disk-uuid',
              path='/documents/'
          )
          print(f"Found {len(result.artifacts)} artifacts")
          for artifact in result.artifacts:
              print(f"  - {artifact.path}{artifact.filename}")
          print(f"Subdirectories: {', '.join(result.directories)}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // List artifacts in a path
          const result = await client.disks.listArtifacts('disk-uuid', {
            path: '/documents/'
          });
          console.log(`Found ${result.artifacts.length} artifacts`);
          for (const artifact of result.artifacts) {
            console.log(`  - ${artifact.path}${artifact.filename}`);
          }
          console.log(`Subdirectories: ${result.directories.join(', ')}`);
  /disk/{disk_id}/artifact/upload_from_sandbox:
    post:
      consumes:
      - application/json
      description: Upload a file from a sandbox environment to disk storage as an
        artifact
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: Upload from sandbox request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.UploadFromSandboxReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Artifact'
              type: object
      security:
      - BearerAuth: []
      summary: Upload file from sandbox to disk
      tags:
      - artifact
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Upload file from sandbox to disk
          artifact = client.disks.artifacts.upload_from_sandbox(
              disk_id='disk-uuid',
              sandbox_id='sandbox-uuid',
              sandbox_path='/home/user/',
              sandbox_filename='output.txt',
              file_path='/results/'
          )
          print(f"Created: {artifact.path}{artifact.filename}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Upload file from sandbox to disk
          const artifact = await client.disks.artifacts.uploadFromSandbox('disk-uuid', {
            sandboxId: 'sandbox-uuid',
            sandboxPath: '/home/user/',
            sandboxFilename: 'output.txt',
            filePath: '/results/'
          });
          console.log(`Created: ${artifact.path}${artifact.filename}`);
  /sandbox:
    post:
      consumes:
      - application/json
      description: Create and start a new sandbox for the project
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/httpclient.SandboxRuntimeInfo'
              type: object
      security:
      - BearerAuth: []
      summary: Create a new sandbox
      tags:
      - sandbox
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Create a new sandbox
          sandbox = client.sandboxes.create()
          print(f"Sandbox ID: {sandbox.sandbox_id}")
          print(f"Status: {sandbox.sandbox_status}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Create a new sandbox
          const sandbox = await client.sandboxes.create();
          console.log(`Sandbox ID: ${sandbox.sandbox_id}`);
          console.log(`Status: ${sandbox.sandbox_status}`);
  /sandbox/{sandbox_id}:
    delete:
      consumes:
      - application/json
      description: Kill a running sandbox
      parameters:
      - description: Sandbox ID
        in: path
        name: sandbox_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/httpclient.FlagResponse'
              type: object
      security:
      - BearerAuth: []
      summary: Kill a sandbox
      tags:
      - sandbox
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Kill a sandbox
          result = client.sandboxes.kill(sandbox_id='sandbox-uuid')
          print(f"Status: {result.status}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Kill a sandbox
          const result = await client.sandboxes.kill('sandbox-uuid');
          console.log(`Status: ${result.status}`);
  /sandbox/{sandbox_id}/exec:
    post:
      consumes:
      - application/json
      description: Execute a shell command in the specified sandbox
      parameters:
      - description: Sandbox ID
        in: path
        name: sandbox_id
        required: true
        type: string
      - description: Command to execute
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.ExecCommandReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/httpclient.SandboxCommandOutput'
              type: object
      security:
      - BearerAuth: []
      summary: Execute command in sandbox
      tags:
      - sandbox
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Execute a command in the sandbox
          result = client.sandboxes.exec_command(
              sandbox_id='sandbox-uuid',
              command='ls -la'
          )
          print(f"stdout: {result.stdout}")
          print(f"stderr: {result.stderr}")
          print(f"exit_code: {result.exit_code}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Execute a command in the sandbox
          const result = await client.sandboxes.execCommand({
            sandboxId: 'sandbox-uuid',
            command: 'ls -la'
          });
          console.log(`stdout: ${result.stdout}`);
          console.log(`stderr: ${result.stderr}`);
          console.log(`exit_code: ${result.exit_code}`);
  /session:
    get:
      consumes:
      - application/json
      description: Get all sessions under a project, optionally filtered by space_id
        or user
      parameters:
      - description: User identifier to filter sessions
        example: alice@acontext.io
        in: query
        name: user
        type: string
      - description: Space ID to filter sessions
        format: uuid
        in: query
        name: space_id
        type: string
      - description: Filter sessions not connected to any space (default false)
        example: false
        in: query
        name: not_connected
        type: boolean
      - description: Limit of sessions to return, default 20. Max 200.
        in: query
        name: limit
        type: integer
      - description: Cursor for pagination. Use the cursor from the previous response
          to get the next page.
        in: query
        name: cursor
        type: string
      - description: Order by created_at descending if true, ascending if false (default
          false)
        example: "false"
        in: query
        name: time_desc
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.ListSessionsOutput'
              type: object
      security:
      - BearerAuth: []
      summary: Get sessions
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # List sessions
          sessions = client.sessions.list(
              space_id='space-uuid',
              limit=20,
              time_desc=True
          )
          for session in sessions.items:
              print(f"{session.id}: {session.space_id}")

          # List sessions for a specific user
          sessions = client.sessions.list(user='alice@acontext.io', limit=20)
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // List sessions
          const sessions = await client.sessions.list({
            spaceId: 'space-uuid',
            limit: 20,
            timeDesc: true
          });
          for (const session of sessions.items) {
            console.log(`${session.id}: ${session.space_id}`);
          }

          // List sessions for a specific user
          const userSessions = await client.sessions.list({ user: 'alice@acontext.io', limit: 20 });
    post:
      consumes:
      - application/json
      description: Create a new session under a space. Optionally associate with a
        user identifier.
      parameters:
      - description: CreateSession payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.CreateSessionReq'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Session'
              type: object
      security:
      - BearerAuth: []
      summary: Create session
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Create a session
          session = client.sessions.create(
              space_id='space-uuid'
          )
          print(f"Created session: {session.id}")

          # Create a session for a specific user
          session = client.sessions.create(user='alice@acontext.io', space_id='space-uuid')
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Create a session
          const session = await client.sessions.create({
            spaceId: 'space-uuid'
          });
          console.log(`Created session: ${session.id}`);

          // Create a session for a specific user
          const userSession = await client.sessions.create({ user: 'alice@acontext.io', spaceId: 'space-uuid' });
  /session/{session_id}:
    delete:
      consumes:
      - application/json
      description: Delete a session by id
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Delete session
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Delete a session
          client.sessions.delete(session_id='session-uuid')
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Delete a session
          await client.sessions.delete('session-uuid');
  /session/{session_id}/configs:
    get:
      consumes:
      - application/json
      description: Get session configs by id
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Session'
              type: object
      security:
      - BearerAuth: []
      summary: Get session configs
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get session configs
          session = client.sessions.get_configs(session_id='session-uuid')
          print(session.configs)
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get session configs
          const session = await client.sessions.getConfigs('session-uuid');
          console.log(session.configs);
    put:
      consumes:
      - application/json
      description: Update session configs by id
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      - description: UpdateSessionConfigs payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateSessionConfigsReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Update session configs
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Update session configs
          client.sessions.update_configs(
              session_id='session-uuid'
          )
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Update session configs
          await client.sessions.updateConfigs('session-uuid');
  /session/{session_id}/connect_to_space:
    post:
      consumes:
      - application/json
      description: Connect a session to a space by id
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      - description: ConnectToSpace payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.ConnectToSpaceReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Connect session to space
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Connect session to space
          client.sessions.connect_to_space(
              session_id='session-uuid',
              space_id='space-uuid'
          )
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Connect session to space
          await client.sessions.connectToSpace('session-uuid', {
            spaceId: 'space-uuid'
          });
  /session/{session_id}/flush:
    post:
      consumes:
      - application/json
      description: Flush the session buffer for a given session
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/httpclient.FlagResponse'
              type: object
      security:
      - BearerAuth: []
      summary: Flush session
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Flush session buffer
          result = client.sessions.flush(session_id='session-uuid')
          print(result.status)
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Flush session buffer
          const result = await client.sessions.flush('session-uuid');
          console.log(result.status);
  /session/{session_id}/get_learning_status:
    get:
      consumes:
      - application/json
      description: Get learning status for a session. Returns the count of space digested
        tasks and not space digested tasks. If the session is not connected to a space,
        returns 0 and 0.
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/httpclient.LearningStatusResponse'
              type: object
      security:
      - BearerAuth: []
      summary: Get learning status
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get learning status
          result = client.sessions.get_learning_status(session_id='session-uuid')
          print(f"Space digested: {result.space_digested_count}, Not digested: {result.not_space_digested_count}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get learning status
          const result = await client.sessions.getLearningStatus('session-uuid');
          console.log(`Space digested: ${result.space_digested_count}, Not digested: ${result.not_space_digested_count}`);
  /session/{session_id}/messages:
    get:
      consumes:
      - application/json
      description: Get messages from session. Default format is openai. Can convert
        to acontext (original), anthropic, or gemini format.
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      - description: "Limit of messages to return. Max 200. If limit is 0 or not provided,
          all messages will be returned. \n\nWARNING!\n Use `limit` only for read-only/display
          purposes (pagination, viewing). Do NOT use `limit` to truncate messages
          before sending to LLM as it may cause tool-call and tool-result unpairing
          issues. Instead, use the `token_limit` edit strategy in `edit_strategies`
          parameter to safely manage message context size."
        in: query
        name: limit
        type: integer
      - description: Cursor for pagination. Use the cursor from the previous response
          to get the next page.
        in: query
        name: cursor
        type: string
      - description: Whether to return asset public url, default is true
        example: "true"
        in: query
        name: with_asset_public_url
        type: string
      - description: 'Format to convert messages to: acontext (original), openai (default),
          anthropic, gemini.'
        enum:
        - acontext
        - openai
        - anthropic
        - gemini
        in: query
        name: format
        type: string
      - description: Order by created_at descending if true, ascending if false (default
          false)
        example: "false"
        in: query
        name: time_desc
        type: string
      - description: JSON array of edit strategies to apply before format conversion
        example: '[{"type":"remove_tool_result","params":{"keep_recent_n_tool_results":3}}]'
        in: query
        name: edit_strategies
        type: string
      - description: Message ID to pin editing strategies at. When provided, strategies
          are only applied to messages up to and including this message ID, keeping
          subsequent messages unchanged. This helps maintain prompt cache stability
          by preserving a stable prefix. The response will include edit_at_message_id
          indicating where strategies were applied.
        example: ""
        in: query
        name: pin_editing_strategies_at_message
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.GetMessagesOutput'
              type: object
      security:
      - BearerAuth: []
      summary: Get messages from session
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get messages from session
          messages = client.sessions.get_messages(
              session_id='session-uuid',
              limit=50,
              format='acontext',
              time_desc=True
          )
          for message in messages.items:
              print(f"{message.role}: {message.parts}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get messages from session
          const messages = await client.sessions.getMessages('session-uuid', {
            limit: 50,
            format: 'acontext',
            timeDesc: true
          });
          for (const message of messages.items) {
            console.log(`${message.role}: ${JSON.stringify(message.parts)}`);
          }
    post:
      consumes:
      - application/json
      - multipart/form-data
      description: 'Supports JSON and multipart/form-data. In multipart mode: the
        payload is a JSON string placed in a form field. The format parameter indicates
        the format of the input message (default: openai, same as GET). The blob field
        should be a complete message object: for openai, use OpenAI ChatCompletionMessageParam
        format (with role and content); for anthropic, use Anthropic MessageParam
        format (with role and content); for acontext (internal), use {role, parts}
        format.'
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      - description: 'StoreMessage payload (Content-Type: application/json)'
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.StoreMessageReq'
      - description: 'StoreMessage payload (Content-Type: multipart/form-data)'
        in: formData
        name: payload
        type: string
      - description: When uploading files, the field name must correspond to parts[*].file_field.
        in: formData
        name: file
        type: file
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Message'
              type: object
      security:
      - BearerAuth: []
      summary: Store message to session
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient
          from acontext.messages import build_acontext_message

          client = AcontextClient(api_key='sk_project_token')

          # Store a message in Acontext format
          message = build_acontext_message(role='user', parts=['Hello!'])
          client.sessions.store_message(
              session_id='session-uuid',
              blob=message,
              format='acontext'
          )

          # Store a message in OpenAI format
          openai_message = {'role': 'user', 'content': 'Hello from OpenAI format!'}
          client.sessions.store_message(
              session_id='session-uuid',
              blob=openai_message,
              format='openai'
          )
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient, MessagePart } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Store a message in Acontext format
          await client.sessions.storeMessage(
            'session-uuid',
            {
              role: 'user',
              parts: [MessagePart.textPart('Hello!')]
            },
            { format: 'acontext' }
          );

          // Store a message in OpenAI format
          await client.sessions.storeMessage(
            'session-uuid',
            {
              role: 'user',
              content: 'Hello from OpenAI format!'
            },
            { format: 'openai' }
          );
  /session/{session_id}/observing_status:
    get:
      consumes:
      - application/json
      description: Returns the count of observed, in_process, and pending messages
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.MessageObservingStatus'
              type: object
      security:
      - BearerAuth: []
      summary: Get message observing status for a session
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get message observing status
          result = client.sessions.messages_observing_status(session_id='session-uuid')
          print(f"Observed: {result.observed}, In Process: {result.in_process}, Pending: {result.pending}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get message observing status
          const result = await client.sessions.messagesObservingStatus('session-uuid');
          console.log(`Observed: ${result.observed}, In Process: ${result.in_process}, Pending: ${result.pending}`);
  /session/{session_id}/task:
    get:
      consumes:
      - application/json
      description: Get tasks from session with cursor-based pagination
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      - description: Limit of tasks to return, default 20. Max 200.
        in: query
        name: limit
        type: integer
      - description: Cursor for pagination. Use the cursor from the previous response
          to get the next page.
        in: query
        name: cursor
        type: string
      - description: Order by created_at descending if true, ascending if false (default
          false)
        example: false
        in: query
        name: time_desc
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.GetTasksOutput'
              type: object
      security:
      - BearerAuth: []
      summary: Get tasks from session
      tags:
      - task
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get tasks from a session
          tasks = client.sessions.get_tasks(
              session_id='session-uuid',
              limit=20,
              time_desc=False
          )
          print(f"Found {len(tasks.items)} tasks")
          for task in tasks.items:
              print(f"Task {task.id}: {task.status}")

          # If there are more tasks, use the cursor for pagination
          if tasks.has_more:
              next_tasks = client.sessions.get_tasks(
                  session_id='session-uuid',
                  limit=20,
                  cursor=tasks.next_cursor
              )
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get tasks from a session
          const tasks = await client.sessions.getTasks('session-uuid', {
            limit: 20,
            timeDesc: false
          });
          console.log(`Found ${tasks.items.length} tasks`);
          for (const task of tasks.items) {
            console.log(`Task ${task.id}: ${task.status}`);
          }

          // If there are more tasks, use the cursor for pagination
          if (tasks.hasMore) {
            const nextTasks = await client.sessions.getTasks('session-uuid', {
              limit: 20,
              cursor: tasks.nextCursor
            });
          }
  /session/{session_id}/token_counts:
    get:
      consumes:
      - application/json
      description: Get total token counts for all text and tool-call parts in a session
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.TokenCountsResp'
              type: object
      security:
      - BearerAuth: []
      summary: Get token counts for session
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get token counts
          result = client.sessions.get_token_counts(session_id='session-uuid')
          print(f"Total tokens: {result.total_tokens}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get token counts
          const result = await client.sessions.getTokenCounts('session-uuid');
          console.log(`Total tokens: ${result.total_tokens}`);
  /space:
    get:
      consumes:
      - application/json
      description: Get all spaces under a project
      parameters:
      - description: User identifier to filter spaces
        example: alice@acontext.io
        in: query
        name: user
        type: string
      - description: Limit of spaces to return, default 20. Max 200.
        in: query
        name: limit
        type: integer
      - description: Cursor for pagination. Use the cursor from the previous response
          to get the next page.
        in: query
        name: cursor
        type: string
      - description: Order by created_at descending if true, ascending if false (default
          false)
        example: "false"
        in: query
        name: time_desc
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.ListSpacesOutput'
              type: object
      security:
      - BearerAuth: []
      summary: Get spaces
      tags:
      - space
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # List spaces
          spaces = client.spaces.list(limit=20, time_desc=True)
          for space in spaces.items:
              print(f"{space.id}: {space.configs}")

          # List spaces for a specific user
          spaces = client.spaces.list(user='alice@acontext.io', limit=20)
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // List spaces
          const spaces = await client.spaces.list({ limit: 20, timeDesc: true });
          for (const space of spaces.items) {
            console.log(`${space.id}: ${JSON.stringify(space.configs)}`);
          }

          // List spaces for a specific user
          const userSpaces = await client.spaces.list({ user: 'alice@acontext.io', limit: 20 });
    post:
      consumes:
      - application/json
      description: Create a new space under a project. Optionally associate with a
        user identifier.
      parameters:
      - description: CreateSpace payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.CreateSpaceReq'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Space'
              type: object
      security:
      - BearerAuth: []
      summary: Create space
      tags:
      - space
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Create a space
          space = client.spaces.create()
          print(f"Created space: {space.id}")

          # Create a space for a specific user
          space = client.spaces.create(user='alice@acontext.io')
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Create a space
          const space = await client.spaces.create();
          console.log(`Created space: ${space.id}`);

          // Create a space for a specific user
          const userSpace = await client.spaces.create({ user: 'alice@acontext.io' });
  /space/{space_id}:
    delete:
      consumes:
      - application/json
      description: Delete a space by its ID
      parameters:
      - description: Space ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Delete space
      tags:
      - space
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Delete a space
          client.spaces.delete(space_id='space-uuid')
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Delete a space
          await client.spaces.delete('space-uuid');
  /space/{space_id}/block:
    get:
      consumes:
      - application/json
      description: List blocks in a space. Use type query parameter to filter by block
        type (page, folder, sop). Use parent_id query parameter to filter by parent.
        If both type and parent_id are empty, returns top-level pages and folders.
      parameters:
      - description: Space ID
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: Block type
        enum:
        - page
        - folder
        - sop
        in: query
        name: type
        type: string
      - description: Parent ID
        format: uuid
        in: query
        name: parent_id
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Block'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: List blocks
      tags:
      - block
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # List blocks
          blocks = client.blocks.list(
              space_id='space-uuid',
              parent_id='parent-uuid',
              block_type='page'
          )
          for block in blocks:
              print(f"{block.id}: {block.title}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // List blocks
          const blocks = await client.blocks.list('space-uuid', {
            parentId: 'parent-uuid',
            type: 'page'
          });
          for (const block of blocks) {
            console.log(`${block.id}: ${block.title}`);
          }
    post:
      consumes:
      - application/json
      description: 'Create a new block (supports types: page, folder, sop). For page
        and folder types, parent_id is optional. For sop type, parent_id is required.'
      parameters:
      - description: Space ID
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: CreateBlock payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.CreateBlockReq'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/httpclient.InsertBlockResponse'
              type: object
      security:
      - BearerAuth: []
      summary: Create block
      tags:
      - block
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Create a folder
          folder = client.blocks.create(
              space_id='space-uuid',
              block_type='folder',
              title='My Folder'
          )

          # Create a page under the folder
          page = client.blocks.create(
              space_id='space-uuid',
              parent_id=folder['id'],
              block_type='page',
              title='My Page',
              props={"description": "Page content here"}
          )
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Create a folder
          const folder = await client.blocks.create('space-uuid', {
            blockType: 'folder',
            title: 'My Folder'
          });

          // Create a page under the folder
          const page = await client.blocks.create('space-uuid', {
            parentId: folder.id,
            blockType: 'page',
            title: 'My Page',
            props: { description: 'Page content here' }
          });
  /space/{space_id}/block/{block_id}:
    delete:
      consumes:
      - application/json
      description: 'Delete a block by its ID (works for block types: page, folder,
        sop)'
      parameters:
      - description: Space ID
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: Block ID
        format: uuid
        in: path
        name: block_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Delete block
      tags:
      - block
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Delete a block
          client.blocks.delete(space_id='space-uuid', block_id='block-uuid')
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Delete a block
          await client.blocks.delete('space-uuid', 'block-uuid');
  /space/{space_id}/block/{block_id}/move:
    put:
      consumes:
      - application/json
      description: 'Move block by updating its parent_id. Works for block types: page,
        folder, sop. For page and folder types, parent_id can be null (root level).'
      parameters:
      - description: Space ID
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: Block ID
        format: uuid
        in: path
        name: block_id
        required: true
        type: string
      - description: MoveBlock payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.MoveBlockReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Move block
      tags:
      - block
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Move block to a different parent
          client.blocks.move(
              space_id='space-uuid',
              block_id='block-uuid',
              parent_id='new-parent-uuid'
          )
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Move block to a different parent
          await client.blocks.move('space-uuid', 'block-uuid', {
            parentId: 'new-parent-uuid'
          });
  /space/{space_id}/block/{block_id}/properties:
    get:
      consumes:
      - application/json
      description: 'Get a block''s properties by its ID (works for block types: page,
        folder, sop)'
      parameters:
      - description: Space ID
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: Block ID
        format: uuid
        in: path
        name: block_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Block'
              type: object
      security:
      - BearerAuth: []
      summary: Get block properties
      tags:
      - block
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get block properties
          block = client.blocks.get_properties(
              space_id='space-uuid',
              block_id='block-uuid'
          )
          print(f"{block.title}: {block.props}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get block properties
          const block = await client.blocks.getProperties('space-uuid', 'block-uuid');
          console.log(`${block.title}: ${JSON.stringify(block.props)}`);
    put:
      consumes:
      - application/json
      description: 'Update a block''s title and properties by its ID (works for block
        types: page, folder, sop)'
      parameters:
      - description: Space ID
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: Block ID
        format: uuid
        in: path
        name: block_id
        required: true
        type: string
      - description: UpdateBlockProperties payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateBlockPropertiesReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Update block properties
      tags:
      - block
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Update block properties
          client.blocks.update_properties(
              space_id='space-uuid',
              block_id='block-uuid',
              title='Updated Title',
              props={"text": "Updated content"}
          )
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Update block properties
          await client.blocks.updateProperties('space-uuid', 'block-uuid', {
            title: 'Updated Title',
            props: { text: 'Updated content' }
          });
  /space/{space_id}/block/{block_id}/sort:
    put:
      consumes:
      - application/json
      description: 'Update block sort value (works for block types: page, folder,
        sop)'
      parameters:
      - description: Space ID
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: Block ID
        format: uuid
        in: path
        name: block_id
        required: true
        type: string
      - description: UpdateBlockSort payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateBlockSortReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Update block sort
      tags:
      - block
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Update block sort order
          client.blocks.update_sort(
              space_id='space-uuid',
              block_id='block-uuid',
              sort=5
          )
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Update block sort order
          await client.blocks.updateSort('space-uuid', 'block-uuid', {
            sort: 5
          });
  /space/{space_id}/configs:
    get:
      consumes:
      - application/json
      description: Retrieve the configurations of a space by its ID
      parameters:
      - description: Space ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Space'
              type: object
      security:
      - BearerAuth: []
      summary: Get space configs
      tags:
      - space
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get space configs
          space = client.spaces.get_configs(space_id='space-uuid')
          print(space.configs)
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get space configs
          const space = await client.spaces.getConfigs('space-uuid');
          console.log(space.configs);
    put:
      consumes:
      - application/json
      description: Update the configurations of a space by its ID
      parameters:
      - description: Space ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: UpdateConfigs payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateSpaceConfigsReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Update space configs
      tags:
      - space
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Update space configs
          client.spaces.update_configs(
              space_id='space-uuid'
          )
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Update space configs
          await client.spaces.updateConfigs('space-uuid');
  /space/{space_id}/experience_confirmations:
    get:
      consumes:
      - application/json
      description: Get all experience confirmations in a space with cursor-based pagination
      parameters:
      - description: Space ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: Limit of confirmations to return, default 20. Max 200.
        in: query
        name: limit
        type: integer
      - description: Cursor for pagination. Use the cursor from the previous response
          to get the next page.
        in: query
        name: cursor
        type: string
      - description: Order by created_at descending if true, ascending if false (default
          false)
        example: false
        in: query
        name: time_desc
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.ListExperienceConfirmationsOutput'
              type: object
      security:
      - BearerAuth: []
      summary: Get experience confirmations
      tags:
      - space
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get unconfirmed experiences
          experiences = client.spaces.get_unconfirmed_experiences(
              space_id='space-uuid',
              limit=20,
              time_desc=True
          )
          for experience in experiences.items:
              print(f"{experience.id}: {experience.experience_data}")

          # If there are more, use the cursor for pagination
          if experiences.has_more:
              next_experiences = client.spaces.get_unconfirmed_experiences(
                  space_id='space-uuid',
                  limit=20,
                  cursor=experiences.next_cursor
              )
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get unconfirmed experiences
          const experiences = await client.spaces.getUnconfirmedExperiences('space-uuid', {
            limit: 20,
            timeDesc: true
          });
          for (const experience of experiences.items) {
            console.log(`${experience.id}: ${JSON.stringify(experience.experience_data)}`);
          }

          // If there are more, use the cursor for pagination
          if (experiences.hasMore) {
            const nextExperiences = await client.spaces.getUnconfirmedExperiences('space-uuid', {
              limit: 20,
              cursor: experiences.nextCursor
            });
          }
  /space/{space_id}/experience_confirmations/{experience_id}:
    put:
      consumes:
      - application/json
      description: 'Confirm an experience confirmation. If save is false, delete the
        row. If save is true, get the data first (TODO: process data), then delete
        the row.'
      parameters:
      - description: Space ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: Experience Confirmation ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: experience_id
        required: true
        type: string
      - description: Confirmation request with save flag
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.ConfirmExperienceReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.ExperienceConfirmation'
              type: object
      security:
      - BearerAuth: []
      summary: Confirm experience
      tags:
      - space
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Confirm experience and save data
          confirmation = client.spaces.confirm_experience(
              space_id='space-uuid',
              experience_id='experience-uuid',
              save=True
          )
          print(f"Saved confirmation: {confirmation.experience_data}")

          # Confirm experience without saving (just delete)
          client.spaces.confirm_experience(
              space_id='space-uuid',
              experience_id='experience-uuid',
              save=False
          )
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Confirm experience and save data
          const confirmation = await client.spaces.confirmExperience('space-uuid', 'experience-uuid', {
            save: true
          });
          console.log(`Saved confirmation: ${JSON.stringify(confirmation.experience_data)}`);

          // Confirm experience without saving (just delete)
          await client.spaces.confirmExperience('space-uuid', 'experience-uuid', {
            save: false
          });
  /space/{space_id}/experience_search:
    get:
      consumes:
      - application/json
      description: Retrieve the experience search results for a given query within
        a space by its ID
      parameters:
      - description: Space ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: space_id
        required: true
        type: string
      - description: Search query for page/folder titles
        in: query
        name: query
        required: true
        type: string
      - description: Maximum number of results to return (1-50, default 10)
        in: query
        name: limit
        type: integer
      - description: 'Search mode: fast or agentic (default fast)'
        in: query
        name: mode
        type: string
      - description: Cosine distance threshold (0=identical, 2=opposite)
        format: float64
        in: query
        name: semantic_threshold
        type: number
      - description: Maximum number of iterations for agentic search (1-100, default
          16)
        in: query
        name: max_iterations
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/httpclient.SpaceSearchResult'
              type: object
      security:
      - BearerAuth: []
      summary: Get experience search
      tags:
      - space
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Experience search
          result = client.spaces.experience_search(
              space_id='space-uuid',
              query='How to implement authentication?',
              limit=10,
              mode='agentic',
              max_iterations=20
          )
          for block in result.cited_blocks:
              print(f"{block.title} (distance: {block.distance})")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Experience search
          const result = await client.spaces.experienceSearch('space-uuid', {
            query: 'How to implement authentication?',
            limit: 10,
            mode: 'agentic',
            maxIterations: 20
          });
          for (const block of result.cited_blocks) {
            console.log(`${block.title} (distance: ${block.distance})`);
          }
  /tool/name:
    get:
      consumes:
      - application/json
      description: Get all tool names within a project
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/httpclient.ToolReferenceData'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: Get tool names
      tags:
      - tool
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get all tool names
          tools = client.tools.list()
          for tool in tools:
              print(f"{tool.name}: {tool.sop_count} SOPs")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get all tool names
          const tools = await client.tools.list();
          for (const tool of tools) {
            console.log(`${tool.name}: ${tool.sop_count} SOPs`);
          }
    put:
      consumes:
      - application/json
      description: Rename one or more tool names within a project
      parameters:
      - description: Tool rename request
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.RenameToolNameReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/httpclient.FlagResponse'
              type: object
      security:
      - BearerAuth: []
      summary: Rename tool names
      tags:
      - tool
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Rename tool names
          result = client.tools.rename([
              {"old_name": "old_tool_name", "new_name": "new_tool_name"}
          ])
          print(result.status)
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Rename tool names
          const result = await client.tools.rename([
            { oldName: 'old_tool_name', newName: 'new_tool_name' }
          ]);
          console.log(result.status);
  /user/{identifier}:
    delete:
      consumes:
      - application/json
      description: Delete a user by identifier and cascade delete all associated resources
        (Space, Session, Disk, Skill)
      parameters:
      - description: User identifier string
        in: path
        name: identifier
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Delete user
      tags:
      - user
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Delete a user and all associated resources
          client.users.delete('alice@acontext.io')
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Delete a user and all associated resources
          await client.users.delete('alice@acontext.io');
  /user/{identifier}/resources:
    get:
      consumes:
      - application/json
      description: Get the resource counts (Spaces, Sessions, Disks, Skills) associated
        with a user
      parameters:
      - description: User identifier string
        in: path
        name: identifier
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.GetUserResourcesOutput'
              type: object
      security:
      - BearerAuth: []
      summary: Get user resources
      tags:
      - user
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get user resource counts
          resources = client.users.get_resources('alice@acontext.io')
          print(f"Spaces: {resources.spaces_count}")
          print(f"Sessions: {resources.sessions_count}")
          print(f"Disks: {resources.disks_count}")
          print(f"Skills: {resources.skills_count}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get user resource counts
          const resources = await client.users.getResources('alice@acontext.io');
          console.log(`Spaces: ${resources.spaces_count}`);
          console.log(`Sessions: ${resources.sessions_count}`);
          console.log(`Disks: ${resources.disks_count}`);
          console.log(`Skills: ${resources.skills_count}`);
  /user/ls:
    get:
      consumes:
      - application/json
      description: Get all users under a project. If limit is not provided or 0, all
        users will be returned.
      parameters:
      - description: Limit of users to return. Max 200. If limit is 0 or not provided,
          all users will be returned.
        in: query
        name: limit
        type: integer
      - description: Cursor for pagination. Use the cursor from the previous response
          to get the next page.
        in: query
        name: cursor
        type: string
      - description: Order by created_at descending if true, ascending if false (default
          false)
        example: false
        in: query
        name: time_desc
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.ListUsersOutput'
              type: object
      security:
      - BearerAuth: []
      summary: List users
      tags:
      - user
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # List all users
          users = client.users.list()
          for user in users.items:
              print(f"{user.identifier}: {user.id}")

          # List users with pagination
          users = client.users.list(limit=20, time_desc=True)
          if users.has_more:
              next_users = client.users.list(limit=20, cursor=users.next_cursor)
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // List all users
          const users = await client.users.list();
          for (const user of users.items) {
            console.log(`${user.identifier}: ${user.id}`);
          }

          // List users with pagination
          const paginatedUsers = await client.users.list({ limit: 20, timeDesc: true });
          if (paginatedUsers.hasMore) {
            const nextUsers = await client.users.list({ limit: 20, cursor: paginatedUsers.nextCursor });
          }
schemes:
- http
- https
securityDefinitions:
  BearerAuth:
    description: Project Bearer token (e.g., "Bearer sk-ac-xxxx")
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
