basePath: /api/v1
definitions:
  converter.GetMessagesOutput:
    properties:
      edit_at_message_id:
        description: Message ID where edit strategies were applied
        type: string
      has_more:
        description: Whether there are more messages
        type: boolean
      ids:
        description: Message IDs corresponding to items
        items:
          type: string
        type: array
      items:
        description: Messages in the requested format
      metas:
        description: User-provided metadata for each message (same order as items/ids)
        items:
          additionalProperties: true
          type: object
        type: array
      next_cursor:
        description: Cursor for pagination
        type: string
      public_urls:
        additionalProperties:
          $ref: '#/definitions/service.PublicURL'
        description: Asset public URLs (only for acontext format)
        type: object
      this_time_tokens:
        description: Token count for returned messages
        type: integer
    type: object
  fileparser.FileContent:
    properties:
      raw:
        description: Raw text content
        type: string
      type:
        description: '"text", "json", "csv", "code"'
        type: string
    type: object
  handler.CreateDiskReq:
    properties:
      user:
        example: alice@acontext.io
        type: string
    type: object
  handler.CreateLearningSpaceReq:
    properties:
      meta:
        type: object
      user:
        example: alice@acontext.io
        type: string
    type: object
  handler.CreateSessionReq:
    properties:
      configs:
        additionalProperties: true
        type: object
      disable_task_tracking:
        example: false
        type: boolean
      use_uuid:
        example: 123e4567-e89b-12d3-a456-426614174000
        type: string
      user:
        example: alice@acontext.io
        type: string
    type: object
  handler.DownloadSkillToSandboxReq:
    properties:
      sandbox_id:
        description: Target sandbox ID
        type: string
    required:
    - sandbox_id
    type: object
  handler.DownloadSkillToSandboxResp:
    properties:
      description:
        description: Skill description
        type: string
      dir_path:
        description: Full path to the skill directory in sandbox
        type: string
      name:
        description: Skill name
        type: string
      success:
        description: Whether the download was successful
        type: boolean
    type: object
  handler.DownloadToSandboxReq:
    properties:
      file_path:
        description: File path (directory) of the artifact
        type: string
      filename:
        description: Filename of the artifact
        type: string
      sandbox_id:
        description: Target sandbox ID
        type: string
      sandbox_path:
        description: Destination directory in the sandbox
        type: string
    required:
    - file_path
    - filename
    - sandbox_id
    - sandbox_path
    type: object
  handler.DownloadToSandboxResp:
    properties:
      success:
        type: boolean
    type: object
  handler.ExecCommandReq:
    properties:
      command:
        type: string
    required:
    - command
    type: object
  handler.GetArtifactResp:
    properties:
      artifact:
        $ref: '#/definitions/model.Artifact'
      content:
        $ref: '#/definitions/fileparser.FileContent'
      public_url:
        type: string
    type: object
  handler.IncludeSkillReq:
    properties:
      skill_id:
        example: skill-uuid
        type: string
    required:
    - skill_id
    type: object
  handler.LearnReq:
    properties:
      session_id:
        example: session-uuid
        type: string
    required:
    - session_id
    type: object
  handler.ListArtifactsResp:
    properties:
      artifacts:
        items:
          $ref: '#/definitions/model.Artifact'
        type: array
      directories:
        items:
          type: string
        type: array
    type: object
  handler.PatchMessageMetaReq:
    properties:
      meta:
        additionalProperties: true
        type: object
    required:
    - meta
    type: object
  handler.PatchMessageMetaResp:
    properties:
      meta:
        additionalProperties: true
        type: object
    type: object
  handler.PatchSessionConfigsReq:
    properties:
      configs:
        additionalProperties: true
        type: object
    required:
    - configs
    type: object
  handler.PatchSessionConfigsResp:
    properties:
      configs:
        additionalProperties: true
        type: object
    type: object
  handler.StoreMessageReq:
    properties:
      blob: {}
      format:
        enum:
        - acontext
        - openai
        - anthropic
        - gemini
        example: openai
        type: string
      meta:
        additionalProperties: true
        description: Optional user-provided metadata for the message
        type: object
    required:
    - blob
    type: object
  handler.TokenCountsResp:
    properties:
      total_tokens:
        type: integer
    type: object
  handler.UpdateArtifactReq:
    properties:
      file_path:
        description: File path including filename
        type: string
      meta:
        description: Custom metadata as JSON string
        type: string
    required:
    - file_path
    - meta
    type: object
  handler.UpdateArtifactResp:
    properties:
      artifact:
        $ref: '#/definitions/model.Artifact'
    type: object
  handler.UpdateLearningSpaceReq:
    properties:
      meta:
        type: object
    required:
    - meta
    type: object
  handler.UpdateSessionConfigsReq:
    properties:
      configs:
        additionalProperties: true
        type: object
    type: object
  handler.UploadFromSandboxReq:
    properties:
      file_path:
        description: Destination directory path on the disk
        type: string
      sandbox_filename:
        description: Filename in the sandbox
        type: string
      sandbox_id:
        description: Source sandbox ID
        type: string
      sandbox_path:
        description: Source directory in the sandbox
        type: string
    required:
    - file_path
    - sandbox_filename
    - sandbox_id
    - sandbox_path
    type: object
  httpclient.FlagResponse:
    properties:
      errmsg:
        type: string
      status:
        type: integer
    type: object
  httpclient.SandboxCommandOutput:
    properties:
      exit_code:
        type: integer
      stderr:
        type: string
      stdout:
        type: string
    type: object
  httpclient.SandboxRuntimeInfo:
    properties:
      sandbox_created_at:
        type: string
      sandbox_expires_at:
        type: string
      sandbox_id:
        type: string
      sandbox_status:
        type: string
    type: object
  model.AgentSkills:
    properties:
      created_at:
        type: string
      description:
        type: string
      disk_id:
        description: DiskID references the Disk that stores this skill's files as
          Artifacts
        type: string
      file_index:
        description: FileIndex is computed at query time from the Disk's Artifacts,
          not persisted
        items:
          $ref: '#/definitions/model.FileInfo'
        type: array
      id:
        type: string
      meta:
        type: object
      name:
        description: Name is not unique - multiple skills can have the same name
        type: string
      updated_at:
        type: string
      user_id:
        type: string
    type: object
  model.Artifact:
    properties:
      created_at:
        type: string
      disk_id:
        type: string
      filename:
        type: string
      meta:
        type: object
      path:
        type: string
      updated_at:
        type: string
    type: object
  model.Disk:
    properties:
      created_at:
        type: string
      id:
        type: string
      project_id:
        type: string
      updated_at:
        type: string
      user_id:
        type: string
    type: object
  model.FileInfo:
    properties:
      mime:
        description: MIME type of the file
        type: string
      path:
        description: Relative path from skillName root
        type: string
    type: object
  model.LearningSpace:
    properties:
      created_at:
        type: string
      id:
        type: string
      meta:
        type: object
      updated_at:
        type: string
      user_id:
        type: string
    type: object
  model.LearningSpaceSession:
    properties:
      created_at:
        type: string
      id:
        type: string
      learning_space_id:
        type: string
      session_id:
        type: string
      status:
        type: string
      updated_at:
        type: string
    type: object
  model.LearningSpaceSkill:
    properties:
      created_at:
        type: string
      id:
        type: string
      learning_space_id:
        type: string
      skill_id:
        type: string
    type: object
  model.Message:
    properties:
      created_at:
        type: string
      id:
        type: string
      meta:
        type: object
      parent_id:
        type: string
      parts:
        items:
          type: object
        type: array
      role:
        type: string
      session_id:
        type: string
      session_task_process_status:
        type: string
      task_id:
        type: string
      updated_at:
        type: string
    type: object
  model.MessageObservingStatus:
    properties:
      in_process:
        type: integer
      observed:
        type: integer
      pending:
        type: integer
      updated_at:
        type: string
    type: object
  model.SandboxLog:
    properties:
      backend_sandbox_id:
        type: string
      backend_type:
        type: string
      created_at:
        type: string
      generated_files:
        items:
          type: object
        type: array
      history_commands:
        items:
          type: object
        type: array
      id:
        type: string
      project_id:
        type: string
      updated_at:
        type: string
      will_total_alive_seconds:
        type: integer
    type: object
  model.Session:
    properties:
      configs:
        type: object
      created_at:
        type: string
      disable_task_tracking:
        type: boolean
      id:
        type: string
      project_id:
        type: string
      updated_at:
        type: string
      user_id:
        type: string
    type: object
  model.Task:
    properties:
      created_at:
        type: string
      data:
        $ref: '#/definitions/model.TaskData'
      id:
        type: string
      is_planning:
        type: boolean
      order:
        type: integer
      project_id:
        type: string
      session_id:
        type: string
      status:
        type: string
      updated_at:
        type: string
    type: object
  model.TaskData:
    properties:
      progresses:
        items:
          type: string
        type: array
      task_description:
        type: string
      user_preferences:
        items:
          type: string
        type: array
    type: object
  model.User:
    properties:
      created_at:
        type: string
      id:
        type: string
      identifier:
        type: string
      project_id:
        type: string
      updated_at:
        type: string
    type: object
  repo.UserResourceCounts:
    properties:
      disks_count:
        type: integer
      sessions_count:
        type: integer
      skills_count:
        type: integer
    type: object
  serializer.Response:
    properties:
      code:
        type: integer
      error:
        type: string
      msg:
        type: string
    type: object
  service.AgentSkillsListItem:
    properties:
      created_at:
        type: string
      description:
        type: string
      file_index:
        items:
          $ref: '#/definitions/model.FileInfo'
        type: array
      id:
        type: string
      meta:
        additionalProperties: true
        type: object
      name:
        type: string
      updated_at:
        type: string
      user_id:
        type: string
    type: object
  service.GetFileOutput:
    properties:
      content:
        allOf:
        - $ref: '#/definitions/fileparser.FileContent'
        description: Present if file is text-based and parseable
      mime:
        type: string
      path:
        type: string
      url:
        description: Present if file is not text-based or not parseable
        type: string
    type: object
  service.GetSandboxLogsOutput:
    properties:
      has_more:
        type: boolean
      items:
        items:
          $ref: '#/definitions/model.SandboxLog'
        type: array
      next_cursor:
        type: string
    type: object
  service.GetTasksOutput:
    properties:
      has_more:
        type: boolean
      items:
        items:
          $ref: '#/definitions/model.Task'
        type: array
      next_cursor:
        type: string
    type: object
  service.GetUserResourcesOutput:
    properties:
      counts:
        $ref: '#/definitions/repo.UserResourceCounts'
    type: object
  service.ListAgentSkillsOutput:
    properties:
      has_more:
        type: boolean
      items:
        items:
          $ref: '#/definitions/service.AgentSkillsListItem'
        type: array
      next_cursor:
        type: string
    type: object
  service.ListDisksOutput:
    properties:
      has_more:
        type: boolean
      items:
        items:
          $ref: '#/definitions/model.Disk'
        type: array
      next_cursor:
        type: string
    type: object
  service.ListLearningSpacesOutput:
    properties:
      has_more:
        type: boolean
      items:
        items:
          $ref: '#/definitions/model.LearningSpace'
        type: array
      next_cursor:
        type: string
    type: object
  service.ListSessionsOutput:
    properties:
      has_more:
        type: boolean
      items:
        items:
          $ref: '#/definitions/model.Session'
        type: array
      next_cursor:
        type: string
    type: object
  service.ListUsersOutput:
    properties:
      has_more:
        type: boolean
      items:
        items:
          $ref: '#/definitions/model.User'
        type: array
      next_cursor:
        type: string
    type: object
  service.PublicURL:
    properties:
      expire_at:
        type: string
      url:
        type: string
    type: object
info:
  contact: {}
  description: API for Acontext.
  title: Acontext API
  version: "1.0"
paths:
  /agent_skills:
    get:
      consumes:
      - application/json
      description: List all agent skills under a project
      parameters:
      - description: User identifier to filter skills
        example: alice@acontext.io
        in: query
        name: user
        type: string
      - description: Limit of agent skills to return, default 20. Max 200.
        in: query
        name: limit
        type: integer
      - description: Cursor for pagination
        in: query
        name: cursor
        type: string
      - description: Order by created_at descending if true
        in: query
        name: time_desc
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.ListAgentSkillsOutput'
              type: object
      security:
      - BearerAuth: []
      summary: List agent skills
      tags:
      - agent_skills
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # List all skills with pagination
          result = client.skills.list_catalog(limit=50)
          for skill in result.items:
              print(f"{skill.name}: {skill.description}")

          # Paginate through all skills
          if result.has_more:
              next_page = client.skills.list_catalog(cursor=result.next_cursor)
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // List all skills with pagination
          const result = await client.skills.list_catalog({ limit: 50 });
          result.items.forEach(skill => {
            console.log(`${skill.name}: ${skill.description}`);
          });

          // Paginate through all skills
          if (result.has_more) {
            const nextPage = await client.skills.list_catalog({ cursor: result.next_cursor });
          }
    post:
      consumes:
      - multipart/form-data
      description: Upload a zip file containing agent skill. The zip file must contain
        a SKILL.md file (case-insensitive) with YAML format containing 'name' and
        'description' fields. The name and description will be extracted from SKILL.md.
        Files are stored as Disk Artifacts. Optionally associate with a user identifier.
      parameters:
      - description: 'ZIP file containing agent skill. Must contain SKILL.md (case-insensitive)
          with YAML format: name and description fields.'
        in: formData
        name: file
        required: true
        type: file
      - description: User identifier to associate with the skill
        example: alice@acontext.io
        in: formData
        name: user
        type: string
      - description: Additional metadata (JSON string)
        in: formData
        name: meta
        type: string
      produces:
      - application/json
      responses:
        "201":
          description: Returns agent skill with name and description extracted from
            SKILL.md
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.AgentSkills'
              type: object
      security:
      - BearerAuth: []
      summary: Create agent skill
      tags:
      - agent_skills
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient
          from acontext.uploads import FileUpload

          client = AcontextClient(api_key='sk_project_token')

          # Upload a skill from a zip file
          with open('my_skill.zip', 'rb') as f:
              skill = client.skills.create(
                  file=FileUpload(filename='my_skill.zip', content=f.read(), content_type='application/zip'),
                  user='alice@example.com',
                  meta={'version': '1.0'}
              )
          print(f"Created skill: {skill.name} (ID: {skill.id})")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';
          import fs from 'fs';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Upload a skill from a zip file
          const fileBuffer = fs.readFileSync('my_skill.zip');
          const skill = await client.skills.create({
            file: ['my_skill.zip', fileBuffer, 'application/zip'],
            user: 'alice@example.com',
            meta: { version: '1.0' }
          });
          console.log(`Created skill: ${skill.name} (ID: ${skill.id})`);
  /agent_skills/{id}:
    delete:
      consumes:
      - application/json
      description: Delete agent skill and all associated files
      parameters:
      - description: Agent skill UUID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Delete agent skill
      tags:
      - agent_skills
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Delete a skill by ID
          client.skills.delete('skill-uuid-here')
          print('Skill deleted successfully')
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Delete a skill by ID
          await client.skills.delete('skill-uuid-here');
          console.log('Skill deleted successfully');
    get:
      consumes:
      - application/json
      description: Get agent skill by its UUID
      parameters:
      - description: Agent skill UUID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.AgentSkills'
              type: object
      security:
      - BearerAuth: []
      summary: Get agent skill by ID
      tags:
      - agent_skills
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get a skill by ID
          skill = client.skills.get('skill-uuid-here')
          print(f"Skill: {skill.name}")
          print(f"Description: {skill.description}")
          print(f"Files: {len(skill.file_index)} file(s)")
          for f in skill.file_index:
              print(f"  - {f.path} ({f.mime})")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get a skill by ID
          const skill = await client.skills.get('skill-uuid-here');
          console.log(`Skill: ${skill.name}`);
          console.log(`Description: ${skill.description}`);
          console.log(`Files: ${skill.file_index.length} file(s)`);
          skill.file_index.forEach(f => console.log(`  - ${f.path} (${f.mime})`));
  /agent_skills/{id}/download_to_sandbox:
    post:
      consumes:
      - application/json
      description: Download all files from an agent skill to a sandbox environment.
        Files are placed at /skills/{skill_name}/.
      parameters:
      - description: Agent skill UUID
        in: path
        name: id
        required: true
        type: string
      - description: Download to sandbox request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.DownloadSkillToSandboxReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.DownloadSkillToSandboxResp'
              type: object
        "409":
          description: Skill directory already exists in sandbox
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Download skill to sandbox
      tags:
      - agent_skills
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Download skill to sandbox
          result = client.skills.download_to_sandbox(
              skill_id='skill-uuid',
              sandbox_id='sandbox-uuid'
          )
          print(f"Success: {result.success}")
          print(f"Skill installed at: {result.dir_path}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Download skill to sandbox
          const result = await client.skills.downloadToSandbox('skill-uuid', {
            sandboxId: 'sandbox-uuid'
          });
          console.log(`Success: ${result.success}`);
          console.log(`Skill installed at: ${result.dir_path}`);
  /agent_skills/{id}/file:
    get:
      consumes:
      - application/json
      description: Get file content or download URL from agent skill. If the file
        is text-based (parseable), returns parsed content. Otherwise, returns a presigned
        download URL.
      parameters:
      - description: Agent skill UUID
        in: path
        name: id
        required: true
        type: string
      - description: File path within the skill (e.g., 'scripts/extract_text.json')
        in: query
        name: file_path
        required: true
        type: string
      - description: URL expiration in seconds for presigned URL (default 900)
        in: query
        name: expire
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.GetFileOutput'
              type: object
      security:
      - BearerAuth: []
      summary: Get file from agent skill
      tags:
      - agent_skills
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get a file from a skill (text files return content, binary files return URL)
          file_resp = client.skills.get_file(
              skill_id='skill-uuid-here',
              file_path='scripts/main.py',
              expire=1800  # URL expires in 30 minutes
          )

          print(f"File: {file_resp.path} ({file_resp.mime})")
          if file_resp.content:
              print(f"Content: {file_resp.content.raw}")
          if file_resp.url:
              print(f"Download URL: {file_resp.url}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get a file from a skill (text files return content, binary files return URL)
          const fileResp = await client.skills.getFile({
            skillId: 'skill-uuid-here',
            filePath: 'scripts/main.py',
            expire: 1800  // URL expires in 30 minutes
          });

          console.log(`File: ${fileResp.path} (${fileResp.mime})`);
          if (fileResp.content) {
            console.log(`Content: ${fileResp.content.raw}`);
          }
          if (fileResp.url) {
            console.log(`Download URL: ${fileResp.url}`);
          }
  /disk:
    get:
      consumes:
      - application/json
      description: List all disks under a project
      parameters:
      - description: User identifier to filter disks
        example: alice@acontext.io
        in: query
        name: user
        type: string
      - description: Limit of disks to return, default 20. Max 200.
        in: query
        name: limit
        type: integer
      - description: Cursor for pagination. Use the cursor from the previous response
          to get the next page.
        in: query
        name: cursor
        type: string
      - description: Order by created_at descending if true, ascending if false (default
          false)
        example: false
        in: query
        name: time_desc
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.ListDisksOutput'
              type: object
      security:
      - BearerAuth: []
      summary: List disks
      tags:
      - disk
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # List disks
          disks = client.disks.list(limit=10, time_desc=True)
          for disk in disks.items:
              print(f"Disk: {disk.id}")

          # List disks for a specific user
          disks = client.disks.list(user='alice@acontext.io', limit=10)
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // List disks
          const disks = await client.disks.list({ limit: 10, timeDesc: true });
          for (const disk of disks.items) {
            console.log(`Disk: ${disk.id}`);
          }

          // List disks for a specific user
          const userDisks = await client.disks.list({ user: 'alice@acontext.io', limit: 10 });
    post:
      consumes:
      - application/json
      description: Create a disk group under a project. Optionally associate with
        a user identifier.
      parameters:
      - description: CreateDisk payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.CreateDiskReq'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Disk'
              type: object
      security:
      - BearerAuth: []
      summary: Create disk
      tags:
      - disk
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Create a disk
          disk = client.disks.create()
          print(f"Created disk: {disk.id}")

          # Create a disk for a specific user
          disk = client.disks.create(user='alice@acontext.io')
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Create a disk
          const disk = await client.disks.create();
          console.log(`Created disk: ${disk.id}`);

          // Create a disk for a specific user
          const userDisk = await client.disks.create({ user: 'alice@acontext.io' });
  /disk/{disk_id}:
    delete:
      consumes:
      - application/json
      description: Delete a disk by its UUID
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Delete disk
      tags:
      - disk
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Delete a disk
          client.disks.delete(disk_id='disk-uuid')
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Delete a disk
          await client.disks.delete('disk-uuid');
  /disk/{disk_id}/artifact:
    delete:
      consumes:
      - application/json
      description: Delete an artifact by path and filename
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: File path including filename
        example: /documents/report.pdf
        in: query
        name: file_path
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Delete artifact
      tags:
      - artifact
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Delete an artifact
          client.disks.delete_artifact(
              disk_id='disk-uuid',
              file_path='/documents/report.pdf'
          )
          print('Artifact deleted successfully')
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Delete an artifact
          await client.disks.deleteArtifact('disk-uuid', {
            filePath: '/documents/report.pdf'
          });
          console.log('Artifact deleted successfully');
    get:
      consumes:
      - application/json
      description: Get artifact information by path and filename. Optionally include
        a presigned URL for downloading and parsed file content.
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: File path including filename
        example: /documents/report.pdf
        in: query
        name: file_path
        required: true
        type: string
      - description: Whether to return public URL, default is true
        example: true
        in: query
        name: with_public_url
        type: boolean
      - description: Whether to return parsed file content, default is true
        example: true
        in: query
        name: with_content
        type: boolean
      - description: 'Expire time in seconds for presigned URL (default: 3600)'
        example: 3600
        in: query
        name: expire
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.GetArtifactResp'
              type: object
      security:
      - BearerAuth: []
      summary: Get artifact
      tags:
      - artifact
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get artifact information
          artifact_info = client.disks.get_artifact(
              disk_id='disk-uuid',
              file_path='/documents/report.pdf',
              with_public_url=True,
              with_content=True,
              expire=3600
          )
          print(f"Artifact: {artifact_info.artifact.filename}")
          if artifact_info.public_url:
              print(f"Download URL: {artifact_info.public_url}")
          if artifact_info.content:
              print(f"Content: {artifact_info.content.text[:100]}...")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get artifact information
          const artifactInfo = await client.disks.getArtifact('disk-uuid', {
            filePath: '/documents/report.pdf',
            withPublicUrl: true,
            withContent: true,
            expire: 3600
          });
          console.log(`Artifact: ${artifactInfo.artifact.filename}`);
          if (artifactInfo.publicUrl) {
            console.log(`Download URL: ${artifactInfo.publicUrl}`);
          }
          if (artifactInfo.content) {
            console.log(`Content: ${artifactInfo.content.text.substring(0, 100)}...`);
          }
    post:
      consumes:
      - multipart/form-data
      description: 'Upload a file and create or update an artifact record under a
        disk. File size must not exceed the configured maximum upload size limit (default:
        16MB).'
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: File path in the disk storage (optional, defaults to '/')
        in: formData
        name: file_path
        type: string
      - description: File to upload (size must not exceed configured limit)
        in: formData
        name: file
        required: true
        type: file
      - description: Custom metadata as JSON string (optional, system metadata will
          be stored under '__artifact_info__' key)
        in: formData
        name: meta
        type: string
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Artifact'
              type: object
        "413":
          description: File size exceeds maximum allowed size
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Upsert artifact
      tags:
      - artifact
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Upload a file to disk
          with open('report.pdf', 'rb') as f:
              artifact = client.disks.upload_artifact(
                  disk_id='disk-uuid',
                  file=f,
                  file_path='/documents/',
                  meta={'category': 'reports', 'year': 2024}
              )
          print(f"Uploaded artifact: {artifact.id}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';
          import fs from 'fs';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Upload a file to disk
          const fileBuffer = fs.readFileSync('report.pdf');
          const artifact = await client.disks.uploadArtifact('disk-uuid', {
            file: fileBuffer,
            filePath: '/documents/',
            meta: { category: 'reports', year: 2024 }
          });
          console.log(`Uploaded artifact: ${artifact.id}`);
    put:
      consumes:
      - application/json
      description: Update an artifact's metadata (user-defined metadata only)
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: Update artifact request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateArtifactReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.UpdateArtifactResp'
              type: object
      security:
      - BearerAuth: []
      summary: Update artifact meta
      tags:
      - artifact
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Update artifact metadata
          artifact = client.disks.update_artifact(
              disk_id='disk-uuid',
              file_path='/documents/report.pdf',
              meta={'category': 'updated', 'reviewed': True, 'version': 2}
          )
          print(f"Updated artifact: {artifact.artifact.id}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Update artifact metadata
          const artifact = await client.disks.updateArtifact('disk-uuid', {
            filePath: '/documents/report.pdf',
            meta: { category: 'updated', reviewed: true, version: 2 }
          });
          console.log(`Updated artifact: ${artifact.artifact.id}`);
  /disk/{disk_id}/artifact/download_to_sandbox:
    post:
      consumes:
      - application/json
      description: Download an artifact from disk storage to a sandbox environment
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: Download to sandbox request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.DownloadToSandboxReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.DownloadToSandboxResp'
              type: object
      security:
      - BearerAuth: []
      summary: Download artifact to sandbox
      tags:
      - artifact
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Download artifact to sandbox
          result = client.disks.artifacts.download_to_sandbox(
              disk_id='disk-uuid',
              file_path='/documents/',
              filename='report.pdf',
              sandbox_id='sandbox-uuid',
              sandbox_path='/home/user/'
          )
          print(f"Success: {result.success}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Download artifact to sandbox
          const result = await client.disks.artifacts.downloadToSandbox('disk-uuid', {
            filePath: '/documents/',
            filename: 'report.pdf',
            sandboxId: 'sandbox-uuid',
            sandboxPath: '/home/user/'
          });
          console.log(`Success: ${result.success}`);
  /disk/{disk_id}/artifact/glob:
    get:
      consumes:
      - application/json
      description: Search through artifact file paths using glob patterns (*, ?, etc.)
      parameters:
      - description: Disk ID
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: Glob pattern (e.g., '**/*.py', '*.txt')
        in: query
        name: query
        required: true
        type: string
      - description: Maximum number of results (default 100, max 1000)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Artifact'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: Search artifact paths with glob patterns
      tags:
      - artifact
  /disk/{disk_id}/artifact/grep:
    get:
      consumes:
      - application/json
      description: Search through text-based artifact content using regex patterns
      parameters:
      - description: Disk ID
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: Regex pattern to search for
        in: query
        name: query
        required: true
        type: string
      - description: Maximum number of results (default 100, max 1000)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Artifact'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: Search artifact content with regex
      tags:
      - artifact
  /disk/{disk_id}/artifact/ls:
    get:
      consumes:
      - application/json
      description: List artifacts in a specific path or all artifacts in a disk
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: Path filter (optional, defaults to root '/')
        in: query
        name: path
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.ListArtifactsResp'
              type: object
      security:
      - BearerAuth: []
      summary: List artifacts
      tags:
      - artifact
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # List artifacts in a path
          result = client.disks.list_artifacts(
              disk_id='disk-uuid',
              path='/documents/'
          )
          print(f"Found {len(result.artifacts)} artifacts")
          for artifact in result.artifacts:
              print(f"  - {artifact.path}{artifact.filename}")
          print(f"Subdirectories: {', '.join(result.directories)}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // List artifacts in a path
          const result = await client.disks.listArtifacts('disk-uuid', {
            path: '/documents/'
          });
          console.log(`Found ${result.artifacts.length} artifacts`);
          for (const artifact of result.artifacts) {
            console.log(`  - ${artifact.path}${artifact.filename}`);
          }
          console.log(`Subdirectories: ${result.directories.join(', ')}`);
  /disk/{disk_id}/artifact/upload_from_sandbox:
    post:
      consumes:
      - application/json
      description: Upload a file from a sandbox environment to disk storage as an
        artifact
      parameters:
      - description: Disk ID
        example: 123e4567-e89b-12d3-a456-426614174000
        format: uuid
        in: path
        name: disk_id
        required: true
        type: string
      - description: Upload from sandbox request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.UploadFromSandboxReq'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Artifact'
              type: object
      security:
      - BearerAuth: []
      summary: Upload file from sandbox to disk
      tags:
      - artifact
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Upload file from sandbox to disk
          artifact = client.disks.artifacts.upload_from_sandbox(
              disk_id='disk-uuid',
              sandbox_id='sandbox-uuid',
              sandbox_path='/home/user/',
              sandbox_filename='output.txt',
              file_path='/results/'
          )
          print(f"Created: {artifact.path}{artifact.filename}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Upload file from sandbox to disk
          const artifact = await client.disks.artifacts.uploadFromSandbox('disk-uuid', {
            sandboxId: 'sandbox-uuid',
            sandboxPath: '/home/user/',
            sandboxFilename: 'output.txt',
            filePath: '/results/'
          });
          console.log(`Created: ${artifact.path}${artifact.filename}`);
  /learning_spaces:
    get:
      consumes:
      - application/json
      description: List learning spaces with optional user, meta filter, and cursor
        pagination.
      parameters:
      - description: Filter by user identifier
        in: query
        name: user
        type: string
      - description: Limit per page, default 20, max 200
        in: query
        name: limit
        type: integer
      - description: Cursor for pagination
        in: query
        name: cursor
        type: string
      - description: Order by created_at descending
        in: query
        name: time_desc
        type: boolean
      - description: URL-encoded JSON for JSONB containment filter
        in: query
        name: filter_by_meta
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.ListLearningSpacesOutput'
              type: object
      security:
      - BearerAuth: []
      summary: List learning spaces
      tags:
      - LearningSpaces
    post:
      consumes:
      - application/json
      description: Create a new learning space. Optionally associate with a user.
      parameters:
      - description: Create learning space request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.CreateLearningSpaceReq'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.LearningSpace'
              type: object
      security:
      - BearerAuth: []
      summary: Create learning space
      tags:
      - LearningSpaces
  /learning_spaces/{id}:
    delete:
      consumes:
      - application/json
      description: Delete a learning space. Junction records are cascade-deleted by
        the DB.
      parameters:
      - description: Learning space UUID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Delete learning space
      tags:
      - LearningSpaces
    get:
      consumes:
      - application/json
      description: Get a learning space by ID.
      parameters:
      - description: Learning space UUID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.LearningSpace'
              type: object
      security:
      - BearerAuth: []
      summary: Get learning space
      tags:
      - LearningSpaces
    patch:
      consumes:
      - application/json
      description: Merge provided meta into existing meta. Existing keys not in the
        request are preserved.
      parameters:
      - description: Learning space UUID
        in: path
        name: id
        required: true
        type: string
      - description: Patch meta request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateLearningSpaceReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.LearningSpace'
              type: object
      security:
      - BearerAuth: []
      summary: Update learning space (patch meta)
      tags:
      - LearningSpaces
  /learning_spaces/{id}/learn:
    post:
      consumes:
      - application/json
      description: Create an async learning record from a session. Initially stays
        in pending status.
      parameters:
      - description: Learning space UUID
        in: path
        name: id
        required: true
        type: string
      - description: Learn request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.LearnReq'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.LearningSpaceSession'
              type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/serializer.Response'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Learn from session
      tags:
      - LearningSpaces
  /learning_spaces/{id}/sessions:
    get:
      consumes:
      - application/json
      description: List all learning session records for a space, including their
        processing status.
      parameters:
      - description: Learning space UUID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.LearningSpaceSession'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: List sessions in space
      tags:
      - LearningSpaces
  /learning_spaces/{id}/skills:
    get:
      consumes:
      - application/json
      description: List all skills associated with a learning space. Returns full
        skill data.
      parameters:
      - description: Learning space UUID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.AgentSkills'
                  type: array
              type: object
      security:
      - BearerAuth: []
      summary: List skills in space
      tags:
      - LearningSpaces
    post:
      consumes:
      - application/json
      description: Add a skill to a learning space.
      parameters:
      - description: Learning space UUID
        in: path
        name: id
        required: true
        type: string
      - description: Include skill request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.IncludeSkillReq'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.LearningSpaceSkill'
              type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/serializer.Response'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Include skill in space
      tags:
      - LearningSpaces
  /learning_spaces/{id}/skills/{skill_id}:
    delete:
      consumes:
      - application/json
      description: Remove a skill from a learning space. Idempotent  silently succeeds
        if not associated.
      parameters:
      - description: Learning space UUID
        in: path
        name: id
        required: true
        type: string
      - description: Skill UUID
        in: path
        name: skill_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Exclude skill from space
      tags:
      - LearningSpaces
  /sandbox:
    post:
      consumes:
      - application/json
      description: Create and start a new sandbox for the project
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/httpclient.SandboxRuntimeInfo'
              type: object
      security:
      - BearerAuth: []
      summary: Create a new sandbox
      tags:
      - sandbox
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Create a new sandbox
          sandbox = client.sandboxes.create()
          print(f"Sandbox ID: {sandbox.sandbox_id}")
          print(f"Status: {sandbox.sandbox_status}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Create a new sandbox
          const sandbox = await client.sandboxes.create();
          console.log(`Sandbox ID: ${sandbox.sandbox_id}`);
          console.log(`Status: ${sandbox.sandbox_status}`);
  /sandbox/{sandbox_id}:
    delete:
      consumes:
      - application/json
      description: Kill a running sandbox
      parameters:
      - description: Sandbox ID
        in: path
        name: sandbox_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/httpclient.FlagResponse'
              type: object
      security:
      - BearerAuth: []
      summary: Kill a sandbox
      tags:
      - sandbox
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Kill a sandbox
          result = client.sandboxes.kill(sandbox_id='sandbox-uuid')
          print(f"Status: {result.status}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Kill a sandbox
          const result = await client.sandboxes.kill('sandbox-uuid');
          console.log(`Status: ${result.status}`);
  /sandbox/{sandbox_id}/exec:
    post:
      consumes:
      - application/json
      description: Execute a shell command in the specified sandbox
      parameters:
      - description: Sandbox ID
        in: path
        name: sandbox_id
        required: true
        type: string
      - description: Command to execute
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.ExecCommandReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/httpclient.SandboxCommandOutput'
              type: object
      security:
      - BearerAuth: []
      summary: Execute command in sandbox
      tags:
      - sandbox
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Execute a command in the sandbox
          result = client.sandboxes.exec_command(
              sandbox_id='sandbox-uuid',
              command='ls -la'
          )
          print(f"stdout: {result.stdout}")
          print(f"stderr: {result.stderr}")
          print(f"exit_code: {result.exit_code}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Execute a command in the sandbox
          const result = await client.sandboxes.execCommand({
            sandboxId: 'sandbox-uuid',
            command: 'ls -la'
          });
          console.log(`stdout: ${result.stdout}`);
          console.log(`stderr: ${result.stderr}`);
          console.log(`exit_code: ${result.exit_code}`);
  /sandbox/logs:
    get:
      consumes:
      - application/json
      description: Get sandbox logs for the project with cursor-based pagination
      parameters:
      - description: Limit of sandbox logs to return, default 20. Max 200.
        in: query
        name: limit
        type: integer
      - description: Cursor for pagination. Use the cursor from the previous response
          to get the next page.
        in: query
        name: cursor
        type: string
      - description: Order by created_at descending if true, ascending if false (default
          false)
        example: false
        in: query
        name: time_desc
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.GetSandboxLogsOutput'
              type: object
      security:
      - BearerAuth: []
      summary: Get sandbox logs
      tags:
      - sandbox
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get sandbox logs
          logs = client.sandboxes.get_logs(limit=20, time_desc=True)
          for log in logs.items:
              print(f"Log {log.id}: {log.backend_type}")

          # If there are more logs, use the cursor for pagination
          if logs.has_more:
              next_logs = client.sandboxes.get_logs(
                  limit=20,
                  cursor=logs.next_cursor
              )
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get sandbox logs
          const logs = await client.sandboxes.getLogs({ limit: 20, timeDesc: true });
          for (const log of logs.items) {
            console.log(`Log ${log.id}: ${log.backend_type}`);
          }

          // If there are more logs, use the cursor for pagination
          if (logs.hasMore) {
            const nextLogs = await client.sandboxes.getLogs({
              limit: 20,
              cursor: logs.nextCursor
            });
          }
  /session:
    get:
      consumes:
      - application/json
      description: Get all sessions under a project, optionally filtered by user or
        configs
      parameters:
      - description: User identifier to filter sessions
        example: alice@acontext.io
        in: query
        name: user
        type: string
      - description: 'JSON-encoded object for JSONB containment filter. Example: {\'
        in: query
        name: filter_by_configs
        type: string
      - description: Limit of sessions to return, default 20. Max 200.
        in: query
        name: limit
        type: integer
      - description: Cursor for pagination. Use the cursor from the previous response
          to get the next page.
        in: query
        name: cursor
        type: string
      - description: Order by created_at descending if true, ascending if false (default
          false)
        example: false
        in: query
        name: time_desc
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.ListSessionsOutput'
              type: object
      security:
      - BearerAuth: []
      summary: Get sessions
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # List sessions
          sessions = client.sessions.list(
              limit=20,
              time_desc=True
          )
          for session in sessions.items:
              print(f"{session.id}")

          # List sessions for a specific user
          sessions = client.sessions.list(user='alice@acontext.io', limit=20)

          # List sessions filtered by configs
          sessions = client.sessions.list(
              limit=20,
              filter_by_configs={"agent": "bot1"}
          )
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // List sessions
          const sessions = await client.sessions.list({
            limit: 20,
            timeDesc: true
          });
          for (const session of sessions.items) {
            console.log(`${session.id}`);
          }

          // List sessions for a specific user
          const userSessions = await client.sessions.list({ user: 'alice@acontext.io', limit: 20 });

          // List sessions filtered by configs
          const filteredSessions = await client.sessions.list({
            limit: 20,
            filterByConfigs: { agent: 'bot1' }
          });
    post:
      consumes:
      - application/json
      description: Create a new session. Optionally associate with a user identifier.
        You can also specify a custom UUID using use_uuid.
      parameters:
      - description: CreateSession payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.CreateSessionReq'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Session'
              type: object
        "400":
          description: Invalid UUID format
          schema:
            $ref: '#/definitions/serializer.Response'
        "409":
          description: Session with this UUID already exists
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Create session
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Create a session
          session = client.sessions.create()
          print(f"Created session: {session.id}")

          # Create a session for a specific user
          session = client.sessions.create(user='alice@acontext.io')

          # Create a session with a specific UUID
          session = client.sessions.create(use_uuid='123e4567-e89b-12d3-a456-426614174000')
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Create a session
          const session = await client.sessions.create();
          console.log(`Created session: ${session.id}`);

          // Create a session for a specific user
          const userSession = await client.sessions.create({ user: 'alice@acontext.io' });

          // Create a session with a specific UUID
          const customSession = await client.sessions.create({ useUuid: '123e4567-e89b-12d3-a456-426614174000' });
  /session/{session_id}:
    delete:
      consumes:
      - application/json
      description: Delete a session by id
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Delete session
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Delete a session
          client.sessions.delete(session_id='session-uuid')
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Delete a session
          await client.sessions.delete('session-uuid');
  /session/{session_id}/configs:
    get:
      consumes:
      - application/json
      description: Get session configs by id
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Session'
              type: object
      security:
      - BearerAuth: []
      summary: Get session configs
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get session configs
          session = client.sessions.get_configs(session_id='session-uuid')
          print(session.configs)
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get session configs
          const session = await client.sessions.getConfigs('session-uuid');
          console.log(session.configs);
    patch:
      consumes:
      - application/json
      description: Update session configs using patch semantics. Only updates keys
        present in the request. Pass null as value to delete a key. Returns the complete
        configs after patch.
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      - description: PatchSessionConfigs payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.PatchSessionConfigsReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.PatchSessionConfigsResp'
              type: object
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/serializer.Response'
        "404":
          description: Session not found
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Patch session configs
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Patch session configs (adds/updates keys, use None to delete)
          updated_configs = client.sessions.patch_configs(
              session_id='session-uuid',
              configs={'agent': 'bot2', 'old_key': None}  # None deletes the key
          )
          print(updated_configs)  # {'existing_key': 'value', 'agent': 'bot2'}
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Patch session configs (adds/updates keys, use null to delete)
          const updatedConfigs = await client.sessions.patchConfigs(
            'session-uuid',
            { agent: 'bot2', old_key: null }  // null deletes the key
          );
          console.log(updatedConfigs);  // { existing_key: 'value', agent: 'bot2' }
    put:
      consumes:
      - application/json
      description: Update session configs by id
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      - description: UpdateSessionConfigs payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateSessionConfigsReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Update session configs
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Update session configs
          client.sessions.update_configs(
              session_id='session-uuid'
          )
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Update session configs
          await client.sessions.updateConfigs('session-uuid');
  /session/{session_id}/flush:
    post:
      consumes:
      - application/json
      description: Flush the session buffer for a given session
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/httpclient.FlagResponse'
              type: object
      security:
      - BearerAuth: []
      summary: Flush session
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Flush session buffer
          result = client.sessions.flush(session_id='session-uuid')
          print(result.status)
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Flush session buffer
          const result = await client.sessions.flush('session-uuid');
          console.log(result.status);
  /session/{session_id}/messages:
    get:
      consumes:
      - application/json
      description: Get messages from session. Default format is openai. Can convert
        to acontext (original), anthropic, or gemini format.
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      - description: "Limit of messages to return. Max 200. If limit is 0 or not provided,
          all messages will be returned. \n\nWARNING!\n Use `limit` only for read-only/display
          purposes (pagination, viewing). Do NOT use `limit` to truncate messages
          before sending to LLM as it may cause tool-call and tool-result unpairing
          issues. Instead, use the `token_limit` edit strategy in `edit_strategies`
          parameter to safely manage message context size."
        in: query
        name: limit
        type: integer
      - description: Cursor for pagination. Use the cursor from the previous response
          to get the next page.
        in: query
        name: cursor
        type: string
      - description: Whether to return asset public url, default is true
        example: true
        in: query
        name: with_asset_public_url
        type: boolean
      - description: 'Format to convert messages to: acontext (original), openai (default),
          anthropic, gemini.'
        enum:
        - acontext
        - openai
        - anthropic
        - gemini
        in: query
        name: format
        type: string
      - description: Order by created_at descending if true, ascending if false (default
          false)
        example: false
        in: query
        name: time_desc
        type: boolean
      - description: JSON array of edit strategies to apply before format conversion
        example: '[{"type":"remove_tool_result","params":{"keep_recent_n_tool_results":3}}]'
        in: query
        name: edit_strategies
        type: string
      - description: Message ID to pin editing strategies at. When provided, strategies
          are only applied to messages up to and including this message ID, keeping
          subsequent messages unchanged. This helps maintain prompt cache stability
          by preserving a stable prefix. The response will include edit_at_message_id
          indicating where strategies were applied.
        example: ""
        in: query
        name: pin_editing_strategies_at_message
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/converter.GetMessagesOutput'
              type: object
      security:
      - BearerAuth: []
      summary: Get messages from session
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get messages from session
          messages = client.sessions.get_messages(
              session_id='session-uuid',
              limit=50,
              format='acontext',
              time_desc=True
          )
          for message in messages.items:
              print(f"{message.role}: {message.parts}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get messages from session
          const messages = await client.sessions.getMessages('session-uuid', {
            limit: 50,
            format: 'acontext',
            timeDesc: true
          });
          for (const message of messages.items) {
            console.log(`${message.role}: ${JSON.stringify(message.parts)}`);
          }
    post:
      consumes:
      - application/json
      - multipart/form-data
      description: 'Supports JSON and multipart/form-data. In multipart mode: the
        payload is a JSON string placed in a form field. The format parameter indicates
        the format of the input message (default: openai, same as GET). The blob field
        should be a complete message object: for openai, use OpenAI ChatCompletionMessageParam
        format (with role and content); for anthropic, use Anthropic MessageParam
        format (with role and content); for acontext (internal), use {role, parts}
        format. The optional meta field allows attaching user-provided metadata to
        the message, which can be retrieved via get_messages().metas or updated via
        patch_message_meta().'
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      - description: 'StoreMessage payload (Content-Type: application/json)'
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.StoreMessageReq'
      - description: 'StoreMessage payload (Content-Type: multipart/form-data)'
        in: formData
        name: payload
        type: string
      - description: When uploading files, the field name must correspond to parts[*].file_field.
        in: formData
        name: file
        type: file
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Message'
              type: object
      security:
      - BearerAuth: []
      summary: Store message to session
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient
          from acontext.messages import build_acontext_message

          client = AcontextClient(api_key='sk_project_token')

          # Store a message in OpenAI format with user metadata
          client.sessions.store_message(
              session_id='session-uuid',
              blob={'role': 'user', 'content': 'Hello!'},
              format='openai',
              meta={'source': 'web', 'request_id': 'abc123'}
          )

          # Store a message in Acontext format
          message = build_acontext_message(role='user', parts=['Hello!'])
          client.sessions.store_message(
              session_id='session-uuid',
              blob=message,
              format='acontext'
          )
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient, MessagePart } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Store a message in OpenAI format with user metadata
          await client.sessions.storeMessage(
            'session-uuid',
            { role: 'user', content: 'Hello!' },
            { format: 'openai', meta: { source: 'web', request_id: 'abc123' } }
          );

          // Store a message in Acontext format
          await client.sessions.storeMessage(
            'session-uuid',
            {
              role: 'user',
              parts: [MessagePart.textPart('Hello!')]
            },
            { format: 'acontext' }
          );
  /session/{session_id}/messages/{message_id}/meta:
    patch:
      consumes:
      - application/json
      description: Update message metadata using patch semantics. Only updates keys
        present in the request. Pass null as value to delete a key.
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      - description: Message ID
        format: uuid
        in: path
        name: message_id
        required: true
        type: string
      - description: PatchMessageMeta payload
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/handler.PatchMessageMetaReq'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.PatchMessageMetaResp'
              type: object
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/serializer.Response'
        "404":
          description: Message not found
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Patch message metadata
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Patch message meta (adds/updates keys, use None to delete)
          updated_meta = client.sessions.patch_message_meta(
              session_id='session-uuid',
              message_id='message-uuid',
              meta={'status': 'processed', 'old_key': None}  # None deletes the key
          )
          print(updated_meta)  # {'existing_key': 'value', 'status': 'processed'}
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Patch message meta (adds/updates keys, use null to delete)
          const updatedMeta = await client.sessions.patchMessageMeta(
            'session-uuid',
            'message-uuid',
            { status: 'processed', old_key: null }  // null deletes the key
          );
          console.log(updatedMeta);  // { existing_key: 'value', status: 'processed' }
  /session/{session_id}/observing_status:
    get:
      consumes:
      - application/json
      description: Returns the count of observed, in_process, and pending messages
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.MessageObservingStatus'
              type: object
      security:
      - BearerAuth: []
      summary: Get message observing status for a session
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get message observing status
          result = client.sessions.messages_observing_status(session_id='session-uuid')
          print(f"Observed: {result.observed}, In Process: {result.in_process}, Pending: {result.pending}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get message observing status
          const result = await client.sessions.messagesObservingStatus('session-uuid');
          console.log(`Observed: ${result.observed}, In Process: ${result.in_process}, Pending: ${result.pending}`);
  /session/{session_id}/task:
    get:
      consumes:
      - application/json
      description: Get tasks from session with cursor-based pagination
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      - description: Limit of tasks to return, default 20. Max 200.
        in: query
        name: limit
        type: integer
      - description: Cursor for pagination. Use the cursor from the previous response
          to get the next page.
        in: query
        name: cursor
        type: string
      - description: Order by created_at descending if true, ascending if false (default
          false)
        example: false
        in: query
        name: time_desc
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.GetTasksOutput'
              type: object
      security:
      - BearerAuth: []
      summary: Get tasks from session
      tags:
      - task
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get tasks from a session
          tasks = client.sessions.get_tasks(
              session_id='session-uuid',
              limit=20,
              time_desc=False
          )
          print(f"Found {len(tasks.items)} tasks")
          for task in tasks.items:
              print(f"Task {task.id}: {task.status}")

          # If there are more tasks, use the cursor for pagination
          if tasks.has_more:
              next_tasks = client.sessions.get_tasks(
                  session_id='session-uuid',
                  limit=20,
                  cursor=tasks.next_cursor
              )
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get tasks from a session
          const tasks = await client.sessions.getTasks('session-uuid', {
            limit: 20,
            timeDesc: false
          });
          console.log(`Found ${tasks.items.length} tasks`);
          for (const task of tasks.items) {
            console.log(`Task ${task.id}: ${task.status}`);
          }

          // If there are more tasks, use the cursor for pagination
          if (tasks.hasMore) {
            const nextTasks = await client.sessions.getTasks('session-uuid', {
              limit: 20,
              cursor: tasks.nextCursor
            });
          }
  /session/{session_id}/token_counts:
    get:
      consumes:
      - application/json
      description: Get total token counts for all text and tool-call parts in a session
      parameters:
      - description: Session ID
        format: uuid
        in: path
        name: session_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/handler.TokenCountsResp'
              type: object
      security:
      - BearerAuth: []
      summary: Get token counts for session
      tags:
      - session
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get token counts
          result = client.sessions.get_token_counts(session_id='session-uuid')
          print(f"Total tokens: {result.total_tokens}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get token counts
          const result = await client.sessions.getTokenCounts('session-uuid');
          console.log(`Total tokens: ${result.total_tokens}`);
  /user/{identifier}:
    delete:
      consumes:
      - application/json
      description: Delete a user by identifier and cascade delete all associated resources
        (Session, Disk, Skill)
      parameters:
      - description: User identifier string
        in: path
        name: identifier
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/serializer.Response'
      security:
      - BearerAuth: []
      summary: Delete user
      tags:
      - user
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Delete a user and all associated resources
          client.users.delete('alice@acontext.io')
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Delete a user and all associated resources
          await client.users.delete('alice@acontext.io');
  /user/{identifier}/resources:
    get:
      consumes:
      - application/json
      description: Get the resource counts (Sessions, Disks, Skills) associated with
        a user
      parameters:
      - description: User identifier string
        in: path
        name: identifier
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.GetUserResourcesOutput'
              type: object
      security:
      - BearerAuth: []
      summary: Get user resources
      tags:
      - user
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # Get user resource counts
          resources = client.users.get_resources('alice@acontext.io')
          print(f"Sessions: {resources.counts.sessions_count}")
          print(f"Disks: {resources.counts.disks_count}")
          print(f"Skills: {resources.counts.skills_count}")
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // Get user resource counts
          const resources = await client.users.getResources('alice@acontext.io');
          console.log(`Sessions: ${resources.counts.sessions_count}`);
          console.log(`Disks: ${resources.counts.disks_count}`);
          console.log(`Skills: ${resources.counts.skills_count}`);
  /user/ls:
    get:
      consumes:
      - application/json
      description: Get all users under a project. If limit is not provided or 0, all
        users will be returned.
      parameters:
      - description: Limit of users to return. Max 200. If limit is 0 or not provided,
          all users will be returned.
        in: query
        name: limit
        type: integer
      - description: Cursor for pagination. Use the cursor from the previous response
          to get the next page.
        in: query
        name: cursor
        type: string
      - description: Order by created_at descending if true, ascending if false (default
          false)
        example: false
        in: query
        name: time_desc
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/serializer.Response'
            - properties:
                data:
                  $ref: '#/definitions/service.ListUsersOutput'
              type: object
      security:
      - BearerAuth: []
      summary: List users
      tags:
      - user
      x-code-samples:
      - label: Python
        lang: python
        source: |
          from acontext import AcontextClient

          client = AcontextClient(api_key='sk_project_token')

          # List all users
          users = client.users.list()
          for user in users.items:
              print(f"{user.identifier}: {user.id}")

          # List users with pagination
          users = client.users.list(limit=20, time_desc=True)
          if users.has_more:
              next_users = client.users.list(limit=20, cursor=users.next_cursor)
      - label: JavaScript
        lang: javascript
        source: |
          import { AcontextClient } from '@acontext/acontext';

          const client = new AcontextClient({ apiKey: 'sk_project_token' });

          // List all users
          const users = await client.users.list();
          for (const user of users.items) {
            console.log(`${user.identifier}: ${user.id}`);
          }

          // List users with pagination
          const paginatedUsers = await client.users.list({ limit: 20, timeDesc: true });
          if (paginatedUsers.hasMore) {
            const nextUsers = await client.users.list({ limit: 20, cursor: paginatedUsers.nextCursor });
          }
schemes:
- http
- https
securityDefinitions:
  BearerAuth:
    description: Project Bearer token (e.g., "Bearer sk-ac-xxxx")
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
