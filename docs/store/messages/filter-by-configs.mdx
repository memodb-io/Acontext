---
title: Filter Sessions
description: "Query sessions using metadata filters"
---

Filter sessions by their `configs` metadata using JSONB containment. Only sessions where `configs` contains all key-value pairs in your filter will be returned.

## Basic Usage

<CodeGroup>
```python Python
import os
from acontext import AcontextClient

client = AcontextClient(api_key=os.getenv("ACONTEXT_API_KEY"))

# Create sessions with configs
session1 = client.sessions.create(configs={"agent": "bot1", "env": "prod"})
session2 = client.sessions.create(configs={"agent": "bot2", "env": "dev"})

# Filter by single key
sessions = client.sessions.list(filter_by_configs={"agent": "bot1"})
# Returns: session1
```

```typescript TypeScript
import { AcontextClient } from '@acontext/acontext';

const client = new AcontextClient({
    apiKey: process.env.ACONTEXT_API_KEY,
});

// Create sessions with configs
const session1 = await client.sessions.create({ configs: { agent: "bot1", env: "prod" } });
const session2 = await client.sessions.create({ configs: { agent: "bot2", env: "dev" } });

// Filter by single key
const sessions = await client.sessions.list({
    filterByConfigs: { agent: "bot1" }
});
// Returns: session1
```
</CodeGroup>

## Filter Examples

### Multiple Keys

Sessions must match **all** key-value pairs:

<CodeGroup>
```python Python
# Only returns sessions with BOTH agent="bot1" AND env="prod"
sessions = client.sessions.list(
    filter_by_configs={"agent": "bot1", "env": "prod"}
)
```

```typescript TypeScript
// Only returns sessions with BOTH agent="bot1" AND env="prod"
const sessions = await client.sessions.list({
    filterByConfigs: { agent: "bot1", env: "prod" }
});
```
</CodeGroup>

### Nested Objects

Filter by nested config values:

<CodeGroup>
```python Python
# Create session with nested config
session = client.sessions.create(
    configs={"agent": {"name": "bot1", "version": "2.0"}}
)

# Filter by nested object
sessions = client.sessions.list(
    filter_by_configs={"agent": {"name": "bot1"}}
)
```

```typescript TypeScript
// Create session with nested config
const session = await client.sessions.create({
    configs: { agent: { name: "bot1", version: "2.0" } }
});

// Filter by nested object
const sessions = await client.sessions.list({
    filterByConfigs: { agent: { name: "bot1" } }
});
```
</CodeGroup>

### Combine with User Filter

<CodeGroup>
```python Python
# Filter by both user and configs
sessions = client.sessions.list(
    user="alice@example.com",
    filter_by_configs={"agent": "bot1"}
)
```

```typescript TypeScript
// Filter by both user and configs
const sessions = await client.sessions.list({
    user: "alice@example.com",
    filterByConfigs: { agent: "bot1" }
});
```
</CodeGroup>

## Important Behaviors

<Note>
- **Case-sensitive**: `{"Agent": "x"}` won't match `{"agent": "x"}`
- **Type-sensitive**: `{"count": 1}` won't match `{"count": "1"}`
- **Partial matching**: filter `{"a": 1}` matches configs `{"a": 1, "b": 2}`
- **NULL excluded**: Sessions with `configs=null` are excluded from filtered results
</Note>

## Next Steps

<CardGroup cols={2}>
<Card title="Per-user Sessions" icon="user" href="/store/per-user">
Associate sessions with users
</Card>
<Card title="Multi-provider Messages" icon="arrows-rotate" href="/store/messages/multi-provider">
Store messages in any format
</Card>
</CardGroup>
